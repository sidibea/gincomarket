<?php
///-build_id: 2017010210.404
/// This source file is subject to the Software License Agreement that is bundled with this 
/// package in the file license.txt, or you can get it here
/// http://addons-modules.com/en/content/3-terms-and-conditions-of-use
///
/// @copyright  2009-2016 Addons-Modules.com
///  If you need open code to customize or merge code with othe modules, please contact us.
class AgileInstallerCore
{
	public static function prepare_newfiles($R750DF0B6C1576BEE1EA14CD96938C89B, $R01787CB5A57D47DC8A648998E4A6512C, $R41E9750045B5EA25161B97AC3F50EEAF)     {   foreach($R750DF0B6C1576BEE1EA14CD96938C89B AS $REB5E70E2A21C9EE28B3D162F3B090B63 => $R5ACF177522018EC66A76F519B62F185D)         {    if(strlen($REB5E70E2A21C9EE28B3D162F3B090B63)>=6 AND substr($REB5E70E2A21C9EE28B3D162F3B090B63,0,6)=='admin/')                 $RB0253597862B1707EA13F71BDE4046B6 = _PS_ROOT_DIR_ . "/" . substr($REB5E70E2A21C9EE28B3D162F3B090B63,0,5) . 'DEV' . substr($REB5E70E2A21C9EE28B3D162F3B090B63,5);             else                 $RB0253597862B1707EA13F71BDE4046B6 = _PS_ROOT_DIR_ . "/" . $REB5E70E2A21C9EE28B3D162F3B090B63;     if(!empty($R5ACF177522018EC66A76F519B62F185D[$R41E9750045B5EA25161B97AC3F50EEAF]))    {              $R9E14437ACD29B79105DE60C9C0413C03 = _PS_ROOT_DIR_ . "/modules/" .$R01787CB5A57D47DC8A648998E4A6512C . "/install/$R41E9750045B5EA25161B97AC3F50EEAF/" . $R5ACF177522018EC66A76F519B62F185D[$R41E9750045B5EA25161B97AC3F50EEAF];              copy($RB0253597862B1707EA13F71BDE4046B6,$R9E14437ACD29B79105DE60C9C0413C03);    }         }     }              public static function detect_admin_folder($R49BC715262142C65C0A84BDAB19C942D)     {                 $R49BC715262142C65C0A84BDAB19C942D = str_replace("\\","/",$R49BC715262142C65C0A84BDAB19C942D);         $R534BDADDF4709161A0B90BA3177FFD4C = explode("/",$R49BC715262142C65C0A84BDAB19C942D);         $R034AE2AB94F99CC81B389A1822DA3353 = $R534BDADDF4709161A0B90BA3177FFD4C[count($R534BDADDF4709161A0B90BA3177FFD4C)-2];                 return $R034AE2AB94F99CC81B389A1822DA3353;     }        public static function install_newfiles($R750DF0B6C1576BEE1EA14CD96938C89B, $R01787CB5A57D47DC8A648998E4A6512C, $R0E50532F705BA890C56DC90FC3472539, $R1A663B454D4EB94298F74D40E74F0913=1)     {   if(empty($R750DF0B6C1576BEE1EA14CD96938C89B))return;     if($R1A663B454D4EB94298F74D40E74F0913 == 2)self::install_newfiles_ver2($R750DF0B6C1576BEE1EA14CD96938C89B, $R01787CB5A57D47DC8A648998E4A6512C, $R0E50532F705BA890C56DC90FC3472539);    Autoload::getInstance()->generateIndex();    }   public static function install_admin_theme_file_override($R01787CB5A57D47DC8A648998E4A6512C, $RD2F1A0252BE3E9E3F25BB946109F982E)  {   if(empty($RD2F1A0252BE3E9E3F25BB946109F982E) || empty($R01787CB5A57D47DC8A648998E4A6512C))return;   foreach($RD2F1A0252BE3E9E3F25BB946109F982E as $R09A33463761E506248078D422B1C5226)   {    $R32C2B98B18F2D203568418F5E10BCD87 = _PS_ROOT_DIR_ . "/" . $R09A33463761E506248078D422B1C5226;       if(file_exists($R32C2B98B18F2D203568418F5E10BCD87))copy($R32C2B98B18F2D203568418F5E10BCD87, $R32C2B98B18F2D203568418F5E10BCD87 . ".bak");       self::ensure_path_for_file(_PS_ROOT_DIR_, $R09A33463761E506248078D422B1C5226);       $RED4895C233B2A28332129DC8F878A111 = _PS_ROOT_DIR_ . "/modules/$R01787CB5A57D47DC8A648998E4A6512C/" . $R09A33463761E506248078D422B1C5226;    copy($RED4895C233B2A28332129DC8F878A111, $R32C2B98B18F2D203568418F5E10BCD87);   }  }   public static function uninstall_admin_theme_file_override($R01787CB5A57D47DC8A648998E4A6512C, $RD2F1A0252BE3E9E3F25BB946109F982E)  {   if(empty($RD2F1A0252BE3E9E3F25BB946109F982E) || empty($R01787CB5A57D47DC8A648998E4A6512C))return;   foreach($RD2F1A0252BE3E9E3F25BB946109F982E as $R09A33463761E506248078D422B1C5226)   {    $R32C2B98B18F2D203568418F5E10BCD87 = _PS_ROOT_DIR_ . "/" . $R09A33463761E506248078D422B1C5226;    if(file_exists($R32C2B98B18F2D203568418F5E10BCD87))unlink($R32C2B98B18F2D203568418F5E10BCD87);   }  }     public static function ensure_path_for_file($RBE4C4D037E939226F65812885A53DAD9, $R09A33463761E506248078D422B1C5226)  {   $R3D752E10F02F1DC61D5916992D6C2BB4 = explode("/", $R09A33463761E506248078D422B1C5226);   $R3D9A15F4B89CA8D0B5D6EC97AB1D0799 = $RBE4C4D037E939226F65812885A53DAD9;   for($R5B92E56774920499F4ADDD0EC782C83E =0; $R5B92E56774920499F4ADDD0EC782C83E < count($R3D752E10F02F1DC61D5916992D6C2BB4) - 1; $R5B92E56774920499F4ADDD0EC782C83E++)   {    $R3D9A15F4B89CA8D0B5D6EC97AB1D0799 .=  '/' . $R3D752E10F02F1DC61D5916992D6C2BB4[$R5B92E56774920499F4ADDD0EC782C83E];    if(!file_exists($R3D9A15F4B89CA8D0B5D6EC97AB1D0799))mkdir($R3D9A15F4B89CA8D0B5D6EC97AB1D0799);   }  }     public static function install_health_check($R750DF0B6C1576BEE1EA14CD96938C89B, $R01787CB5A57D47DC8A648998E4A6512C, $R0E50532F705BA890C56DC90FC3472539)  {   if(empty($R750DF0B6C1576BEE1EA14CD96938C89B))return '';    $R41E9750045B5EA25161B97AC3F50EEAF = substr(_PS_VERSION_, 0,3) . "x";    $R822E61736314E402F1332C865BD25DA3 = '';   foreach($R750DF0B6C1576BEE1EA14CD96938C89B AS $REB5E70E2A21C9EE28B3D162F3B090B63=>$R5ACF177522018EC66A76F519B62F185D)         {    $RB72BD792B22FA8AF3E5E180A511A992D = $R5ACF177522018EC66A76F519B62F185D[$R41E9750045B5EA25161B97AC3F50EEAF];    if(empty($RB72BD792B22FA8AF3E5E180A511A992D))continue;              $RB0253597862B1707EA13F71BDE4046B6 = _PS_ROOT_DIR_ . "/modules/" .$R01787CB5A57D47DC8A648998E4A6512C . "/install/$R41E9750045B5EA25161B97AC3F50EEAF/" . $RB72BD792B22FA8AF3E5E180A511A992D;             if(strlen($RB72BD792B22FA8AF3E5E180A511A992D)>=6 AND substr($RB72BD792B22FA8AF3E5E180A511A992D,0,6) == 'admin/')              $R9E14437ACD29B79105DE60C9C0413C03 = _PS_ROOT_DIR_ . "/" . $R0E50532F705BA890C56DC90FC3472539 . substr($RB72BD792B22FA8AF3E5E180A511A992D,5);             else              $R9E14437ACD29B79105DE60C9C0413C03 = _PS_ROOT_DIR_ . "/" . $RB72BD792B22FA8AF3E5E180A511A992D;          $RCDA0360999CBBF80C8FCFEACFF58E909 = floatval(self::get_build_id($RB0253597862B1707EA13F71BDE4046B6));             $R50447F8D2130B5961D7E098BB1D2142A = floatval(self::get_build_id($R9E14437ACD29B79105DE60C9C0413C03));    if(!file_exists($R9E14437ACD29B79105DE60C9C0413C03) OR ($RCDA0360999CBBF80C8FCFEACFF58E909>0 AND $RCDA0360999CBBF80C8FCFEACFF58E909 > $R50447F8D2130B5961D7E098BB1D2142A))    {          $R822E61736314E402F1332C865BD25DA3 = $R822E61736314E402F1332C865BD25DA3 . Tools::displayError(' From: ') . $RB0253597862B1707EA13F71BDE4046B6 . "<BR>";     $R822E61736314E402F1332C865BD25DA3 = $R822E61736314E402F1332C865BD25DA3 . Tools::displayError(' To: ') . $R9E14437ACD29B79105DE60C9C0413C03 . '  [';      if(!file_exists($R9E14437ACD29B79105DE60C9C0413C03))      $R822E61736314E402F1332C865BD25DA3 = $R822E61736314E402F1332C865BD25DA3 . Tools::displayError('File not found:  ');     else      $R822E61736314E402F1332C865BD25DA3 = $R822E61736314E402F1332C865BD25DA3 . Tools::displayError('Ver mismatch:  ') . "($R50447F8D2130B5961D7E098BB1D2142A < $RCDA0360999CBBF80C8FCFEACFF58E909)";          $R822E61736314E402F1332C865BD25DA3 = $R822E61736314E402F1332C865BD25DA3 . ']<br><br>';    }         }      if(empty($R822E61736314E402F1332C865BD25DA3))return '';        return '    <div class="alert error">     <h3>' .Tools::displayError('Some files are not copied correctly during the installation. Usually it is because of your access permission setting. ') .'</h3>     ' .Tools::displayError('Please make sure you have set permissions correctly for Folder: 755, Files: 644, then try to reinstall the module again.')        .Tools::displayError('If the error persists, please manaually copy the file as following.') .'     <br><br>' . $R822E61736314E402F1332C865BD25DA3 . '    </div>';  }   private static function install_newfiles_ver2($R750DF0B6C1576BEE1EA14CD96938C89B, $R01787CB5A57D47DC8A648998E4A6512C, $R0E50532F705BA890C56DC90FC3472539)     {   if(empty($R750DF0B6C1576BEE1EA14CD96938C89B))return;   foreach($R750DF0B6C1576BEE1EA14CD96938C89B AS $REB5E70E2A21C9EE28B3D162F3B090B63=>$R5ACF177522018EC66A76F519B62F185D)         {    $R41E9750045B5EA25161B97AC3F50EEAF = substr(_PS_VERSION_, 0,3) . "x";      $R5D044909EB40320CFA749192B5E09BBB = $R5ACF177522018EC66A76F519B62F185D[$R41E9750045B5EA25161B97AC3F50EEAF];        if(!empty($R5D044909EB40320CFA749192B5E09BBB))     self::copy_file_with_backup($R01787CB5A57D47DC8A648998E4A6512C, $R0E50532F705BA890C56DC90FC3472539, $R5D044909EB40320CFA749192B5E09BBB,$R5D044909EB40320CFA749192B5E09BBB );         }         }        private static function copy_file_with_backup($R01787CB5A57D47DC8A648998E4A6512C, $R0E50532F705BA890C56DC90FC3472539, $R37A996BDF4296EC43FBCF999013B2E96, $RB72BD792B22FA8AF3E5E180A511A992D)  {   if(empty($R37A996BDF4296EC43FBCF999013B2E96) OR empty($RB72BD792B22FA8AF3E5E180A511A992D))return;    $R41E9750045B5EA25161B97AC3F50EEAF = substr(_PS_VERSION_, 0,3) . "x";        $RB0253597862B1707EA13F71BDE4046B6 = _PS_ROOT_DIR_ . "/modules/" .$R01787CB5A57D47DC8A648998E4A6512C . "/install/$R41E9750045B5EA25161B97AC3F50EEAF/" . $R37A996BDF4296EC43FBCF999013B2E96;   if(strlen($RB72BD792B22FA8AF3E5E180A511A992D)>=6 AND substr($RB72BD792B22FA8AF3E5E180A511A992D,0,6) == 'admin/')          $R9E14437ACD29B79105DE60C9C0413C03 = _PS_ROOT_DIR_ . "/" . $R0E50532F705BA890C56DC90FC3472539 . substr($RB72BD792B22FA8AF3E5E180A511A992D,5);         else          $R9E14437ACD29B79105DE60C9C0413C03 = _PS_ROOT_DIR_ . "/" . $RB72BD792B22FA8AF3E5E180A511A992D;         if(!file_exists($RB0253597862B1707EA13F71BDE4046B6))return;                      $R105956B642BF9CEA00CF0F402C9572CC = 0;           $RCDA0360999CBBF80C8FCFEACFF58E909 = floatval(self::get_build_id($RB0253597862B1707EA13F71BDE4046B6));   if(!file_exists($R9E14437ACD29B79105DE60C9C0413C03))         {             $R105956B642BF9CEA00CF0F402C9572CC = 1;    $R50447F8D2130B5961D7E098BB1D2142A = 0;         }         else         {    $R50447F8D2130B5961D7E098BB1D2142A = floatval(self::get_build_id($R9E14437ACD29B79105DE60C9C0413C03));             if($RCDA0360999CBBF80C8FCFEACFF58E909 > $R50447F8D2130B5961D7E098BB1D2142A OR $R50447F8D2130B5961D7E098BB1D2142A==0)$R105956B642BF9CEA00CF0F402C9572CC = 1;         }            if($R105956B642BF9CEA00CF0F402C9572CC == 1)         {                         $R327355F2D135F41AF1F654A197223211 = self::get_file_folder($R9E14437ACD29B79105DE60C9C0413C03);             $R3435986BDA8C9393E0EBDB9F58F02750 = $R327355F2D135F41AF1F654A197223211[0];             $R09A33463761E506248078D422B1C5226 = $R327355F2D135F41AF1F654A197223211[1];             if(!file_exists($R3435986BDA8C9393E0EBDB9F58F02750))mkdir($R3435986BDA8C9393E0EBDB9F58F02750);              if(!file_exists($R3435986BDA8C9393E0EBDB9F58F02750 . "/bak"))mkdir($R3435986BDA8C9393E0EBDB9F58F02750 . "/bak");              $RC6205179FC13A8425BF54275A9D92087 = $R3435986BDA8C9393E0EBDB9F58F02750 . "/bak/" . $R09A33463761E506248078D422B1C5226 . "-" . $R50447F8D2130B5961D7E098BB1D2142A . ".bak";             if( file_exists($R9E14437ACD29B79105DE60C9C0413C03) AND !file_exists($RC6205179FC13A8425BF54275A9D92087) )copy($R9E14437ACD29B79105DE60C9C0413C03, $RC6205179FC13A8425BF54275A9D92087);             copy($RB0253597862B1707EA13F71BDE4046B6,$R9E14437ACD29B79105DE60C9C0413C03);         }             }            public static function get_file_folder($R09A33463761E506248078D422B1C5226)     {         $R5B92E56774920499F4ADDD0EC782C83E = strrpos($R09A33463761E506248078D422B1C5226,"/");         if($R5B92E56774920499F4ADDD0EC782C83E === false)return "";         $R327355F2D135F41AF1F654A197223211[] = substr($R09A33463761E506248078D422B1C5226,0,$R5B92E56774920499F4ADDD0EC782C83E);         $R327355F2D135F41AF1F654A197223211[] = substr($R09A33463761E506248078D422B1C5226,$R5B92E56774920499F4ADDD0EC782C83E);         return $R327355F2D135F41AF1F654A197223211;     }          public static function get_build_id($R09A33463761E506248078D422B1C5226)     {   if(!file_exists($R09A33463761E506248078D422B1C5226))return 0;         $R3870A31671674F38BD563DC916D3A5A0 = file($R09A33463761E506248078D422B1C5226);           foreach($R3870A31671674F38BD563DC916D3A5A0 AS $R9061C9FEF16E7C8C556365E17D37952C)         {    $R5B92E56774920499F4ADDD0EC782C83E = strpos($R9061C9FEF16E7C8C556365E17D37952C, "-build_id:");             if($R5B92E56774920499F4ADDD0EC782C83E !== false)             {                 $R3882A427AF6B1C2DCCD99E012F639DDD = explode(":",$R9061C9FEF16E7C8C556365E17D37952C);     return floatval($R3882A427AF6B1C2DCCD99E012F639DDD[1]);             }         }          return 0;            }            public static function sql_install($R91A3B727B412F64A950C2A92DC17CB91)     {   if(!file_exists($R91A3B727B412F64A950C2A92DC17CB91))return true;      $R130D64A4AD653C91E0FD80DE8FEADC3A = "SELECT table_collation,character_set_name      FROM information_schema.`TABLES` T,          information_schema.`COLLATION_CHARACTER_SET_APPLICABILITY` CCSA      WHERE CCSA.collation_name = T.table_collation       AND T.table_schema = '" . _DB_NAME_ . "'       AND T.table_name = '" . _DB_PREFIX_ . "employee'     ";        $RE637DDD53F918FEA21D3FCA2A1A8715C = Db::getInstance()->ExecuteS($R130D64A4AD653C91E0FD80DE8FEADC3A);    $R411870BA97D9A63087C945DAD97F930E =  $RE637DDD53F918FEA21D3FCA2A1A8715C[0]['character_set_name'];   if(empty($R411870BA97D9A63087C945DAD97F930E))$R411870BA97D9A63087C945DAD97F930E = 'utf8';    $REE47B41748FFD9099B6D8B610D61F4CF = $RE637DDD53F918FEA21D3FCA2A1A8715C[0]['table_collation'];   if(empty($REE47B41748FFD9099B6D8B610D61F4CF))$REE47B41748FFD9099B6D8B610D61F4CF = 'utf8_general_ci';          if (!file_exists($R91A3B727B412F64A950C2A92DC17CB91))    return (true);   else if (!$R130D64A4AD653C91E0FD80DE8FEADC3A = file_get_contents($R91A3B727B412F64A950C2A92DC17CB91))    return (false);   $R130D64A4AD653C91E0FD80DE8FEADC3A = str_replace('PREFIX_', _DB_PREFIX_, $R130D64A4AD653C91E0FD80DE8FEADC3A);   $RDF06FF918738897CBA6294D6F3F50917 = ' DEFAULT CHARACTER  SET ' . $R411870BA97D9A63087C945DAD97F930E . ' COLLATE ' . $REE47B41748FFD9099B6D8B610D61F4CF . ' ';   $R130D64A4AD653C91E0FD80DE8FEADC3A = str_replace('DEFAULT_CHARSET_COLLATION', $RDF06FF918738897CBA6294D6F3F50917 , $R130D64A4AD653C91E0FD80DE8FEADC3A);    $R130D64A4AD653C91E0FD80DE8FEADC3A = preg_split("/;\s*[\r\n]+/",$R130D64A4AD653C91E0FD80DE8FEADC3A);        foreach ($R130D64A4AD653C91E0FD80DE8FEADC3A as $RE91192A00FF990477EE414AD5D708F08)   {       if(strlen($RE91192A00FF990477EE414AD5D708F08)<=3)continue;    if (!Db::getInstance()->Execute(trim($RE91192A00FF990477EE414AD5D708F08)))     return (false);      }         return true;             }    public static function subtabs_nbr($R426A2302D481ACC992F8794B3AA4931B)  {   $R6680333E75737B6D7C380492DF94CB6F = self::getTabIDByClassName($R426A2302D481ACC992F8794B3AA4931B);   if($R6680333E75737B6D7C380492DF94CB6F <=0)return 0;   $R130D64A4AD653C91E0FD80DE8FEADC3A = 'SELECT COUNT(*) AS num FROM ' . _DB_PREFIX_ . 'tab WHERE id_parent=' . intval($R6680333E75737B6D7C380492DF94CB6F);   $R1A80B8888C873260EBAD2077215D20A3 = Db::getInstance()->getValue($R130D64A4AD653C91E0FD80DE8FEADC3A);   return  $R1A80B8888C873260EBAD2077215D20A3;   }          public static function create_tab($R55EF148EC44192AD3937A361D8645750, $R426A2302D481ACC992F8794B3AA4931B, $R49BF74D90F016C51B1EC9CC0AC6DB0A3,$R01787CB5A57D47DC8A648998E4A6512C)  {   $R6680333E75737B6D7C380492DF94CB6F = self::getTabIDByClassName($R426A2302D481ACC992F8794B3AA4931B);         if($R6680333E75737B6D7C380492DF94CB6F >0)return $R6680333E75737B6D7C380492DF94CB6F;    $RC38E51FEFB6EF8CE9D73E624FC73FE84 = 0;   if(!empty($R49BF74D90F016C51B1EC9CC0AC6DB0A3))   {    $RC38E51FEFB6EF8CE9D73E624FC73FE84 = self::getTabIDByClassName($R49BF74D90F016C51B1EC9CC0AC6DB0A3);       if(!$RC38E51FEFB6EF8CE9D73E624FC73FE84)     $RC38E51FEFB6EF8CE9D73E624FC73FE84 = self::getTabIDByClassName( str_replace('Admin','Agile',$R49BF74D90F016C51B1EC9CC0AC6DB0A3));   }     $R6680333E75737B6D7C380492DF94CB6F = 1;   $R679E9B9234E2062F809DBD3325D37FB6 = Db::getInstance()->ExecuteS("SELECT MAX(`id_tab`) AS max_id FROM `"._DB_PREFIX_."tab`");        if (is_array($R679E9B9234E2062F809DBD3325D37FB6) AND sizeof($R679E9B9234E2062F809DBD3325D37FB6) > 0)    $R6680333E75737B6D7C380492DF94CB6F = $R679E9B9234E2062F809DBD3325D37FB6[0]['max_id'] + 1;      $R0AB787605ED5ED160FCBD1F3E9B8BDB7 = 0;   $R679E9B9234E2062F809DBD3325D37FB6 = Db::getInstance()->ExecuteS("SELECT MAX(`position`) AS max_position FROM `"._DB_PREFIX_."tab` WHERE `id_parent` = " .  $RC38E51FEFB6EF8CE9D73E624FC73FE84);   if (is_array($R679E9B9234E2062F809DBD3325D37FB6) AND sizeof($R679E9B9234E2062F809DBD3325D37FB6) > 0)    $R0AB787605ED5ED160FCBD1F3E9B8BDB7 = $R679E9B9234E2062F809DBD3325D37FB6[0]['max_position'] + 1;            $R130D64A4AD653C91E0FD80DE8FEADC3A = 'INSERT INTO `' . _DB_PREFIX_. 'tab` (`id_tab`, `id_parent`, `class_name`, `module`, `position`, `active`,`hide_host_mode`,`icon`) VALUES (' . $R6680333E75737B6D7C380492DF94CB6F . ',' .  $RC38E51FEFB6EF8CE9D73E624FC73FE84 . ',\'' . $R426A2302D481ACC992F8794B3AA4931B . '\',\'' . $R01787CB5A57D47DC8A648998E4A6512C . '\',' . $R0AB787605ED5ED160FCBD1F3E9B8BDB7 . ', 1, 0,\'\')';       Db::getInstance()->Execute($R130D64A4AD653C91E0FD80DE8FEADC3A);    $RE4383934787B83B49DDB150913CF42D2 = Language::getLanguages(false);      if (is_array($RE4383934787B83B49DDB150913CF42D2) AND !empty($RE4383934787B83B49DDB150913CF42D2))      {          $RE91192A00FF990477EE414AD5D708F08 = 'INSERT IGNORE INTO`' . _DB_PREFIX_ . 'tab_lang` (`id_tab`, `id_lang`, `name`) VALUES ';        foreach ($RE4383934787B83B49DDB150913CF42D2 as $R739F6542BB76E1DDEC494F839F85A06E)        $RE91192A00FF990477EE414AD5D708F08 .= '(' . $R6680333E75737B6D7C380492DF94CB6F . ', ' . $R739F6542BB76E1DDEC494F839F85A06E['id_lang'] . ',\''. $R55EF148EC44192AD3937A361D8645750 . '\'), ';          $RE91192A00FF990477EE414AD5D708F08 = rtrim($RE91192A00FF990477EE414AD5D708F08, ', ');          Db::getInstance()->Execute($RE91192A00FF990477EE414AD5D708F08);         }     $R158C6B3B1C965555A15B0101B8F7376B = array('class_name' =>$R426A2302D481ACC992F8794B3AA4931B);    $RCC3015504E6FBA9161EDE5F1666120EA = array("CREATE" => Access::sluggifyTab($R158C6B3B1C965555A15B0101B8F7376B,"CREATE"), "READ" => Access::sluggifyTab($R158C6B3B1C965555A15B0101B8F7376B,"READ"), "UPDATE" =>  Access::sluggifyTab($R158C6B3B1C965555A15B0101B8F7376B,"UPDATE"), "DELETE" =>  Access::sluggifyTab($R158C6B3B1C965555A15B0101B8F7376B,"DELETE"));   Db::getInstance()->Execute('INSERT INTO `' . _DB_PREFIX_ . 'authorization_role` (slug) VALUES (\'' . $RCC3015504E6FBA9161EDE5F1666120EA['CREATE'] . '\')');   Db::getInstance()->Execute('INSERT INTO `' . _DB_PREFIX_ . 'authorization_role` (slug) VALUES (\'' . $RCC3015504E6FBA9161EDE5F1666120EA['READ'] . '\')');   Db::getInstance()->Execute('INSERT INTO `' . _DB_PREFIX_ . 'authorization_role` (slug) VALUES (\'' . $RCC3015504E6FBA9161EDE5F1666120EA['UPDATE'] . '\')');   Db::getInstance()->Execute('INSERT INTO `' . _DB_PREFIX_ . 'authorization_role` (slug) VALUES (\'' . $RCC3015504E6FBA9161EDE5F1666120EA['DELETE'] . '\')');        AgileInstaller::update_access(1, $R426A2302D481ACC992F8794B3AA4931B, 1, 1, 1, 1);          return $R6680333E75737B6D7C380492DF94CB6F;  }    public static function deleteProfilePermission($R44B1740495C3DC5BAB56D0F3706FEA4F)  {     if(intval($R44B1740495C3DC5BAB56D0F3706FEA4F) <= 1)return;     $R130D64A4AD653C91E0FD80DE8FEADC3A = 'DELETE FROM ' . _DB_PREFIX_  . 'access WHERE id_profile=' . $R44B1740495C3DC5BAB56D0F3706FEA4F;   Db::getInstance()->Execute($R130D64A4AD653C91E0FD80DE8FEADC3A);    }     public static function getTabIDByClassName($R426A2302D481ACC992F8794B3AA4931B)  {   $R130D64A4AD653C91E0FD80DE8FEADC3A = 'SELECT id_tab FROM '. _DB_PREFIX_ . 'tab WHERE class_name=\'' . $R426A2302D481ACC992F8794B3AA4931B . '\'';   return intval(Db::getInstance()->getValue($R130D64A4AD653C91E0FD80DE8FEADC3A));  }            public static function delete_tab($R426A2302D481ACC992F8794B3AA4931B)     {   $R755BA04A496FC65FE2ABD428C59E3EC8 = self::getTabIDByClassName($R426A2302D481ACC992F8794B3AA4931B);         if(isset($R755BA04A496FC65FE2ABD428C59E3EC8) AND $R755BA04A496FC65FE2ABD428C59E3EC8>0)         {    if(AgileInstaller::tabHasChildren($R426A2302D481ACC992F8794B3AA4931B))return;                 $R158C6B3B1C965555A15B0101B8F7376B = new Tab($R755BA04A496FC65FE2ABD428C59E3EC8);             $R158C6B3B1C965555A15B0101B8F7376B->delete();         }     }          public static function create_hook($R06D0E47D63075A67755B7AFEDC47A1C2)     {   return;                                   }       public static function update_access($R44B1740495C3DC5BAB56D0F3706FEA4F, $R426A2302D481ACC992F8794B3AA4931B, $R291DC8213527F4829DBCBB140A324A88, $RCC32DA8337A77C457B8814418780757C, $R372F5BCB71056A4D022E984BF2099806, $R3AA041D3204639AA7E79B914AB91B756)     {   $R6680333E75737B6D7C380492DF94CB6F =  self::getTabIDByClassName($R426A2302D481ACC992F8794B3AA4931B);   if(intval($R6680333E75737B6D7C380492DF94CB6F)>0)   {    $R158C6B3B1C965555A15B0101B8F7376B = array('class_name' =>$R426A2302D481ACC992F8794B3AA4931B);    $RCC3015504E6FBA9161EDE5F1666120EA = array("CREATE" => Access::sluggifyTab($R158C6B3B1C965555A15B0101B8F7376B,"CREATE"), "READ" => Access::sluggifyTab($R158C6B3B1C965555A15B0101B8F7376B,"READ"), "UPDATE" =>  Access::sluggifyTab($R158C6B3B1C965555A15B0101B8F7376B,"UPDATE"), "DELETE" =>  Access::sluggifyTab($R158C6B3B1C965555A15B0101B8F7376B,"DELETE"));    $R130D64A4AD653C91E0FD80DE8FEADC3A = "DELETE FROM `"._DB_PREFIX_."access` WHERE `id_profile` = $R44B1740495C3DC5BAB56D0F3706FEA4F AND `id_authorization_role` IN (SELECT `id_authorization_role` FROM  `"._DB_PREFIX_."authorization_role` WHERE slug IN ('" . implode("','", array_values($RCC3015504E6FBA9161EDE5F1666120EA)) . "'))";    Db::getInstance()->Execute($R130D64A4AD653C91E0FD80DE8FEADC3A);       if($R291DC8213527F4829DBCBB140A324A88 == 1)    {     $R130D64A4AD653C91E0FD80DE8FEADC3A = "INSERT INTO `"._DB_PREFIX_."access` (`id_profile`, `id_authorization_role`) SELECT $R44B1740495C3DC5BAB56D0F3706FEA4F AS id_profile, `id_authorization_role` FROM  `"._DB_PREFIX_."authorization_role` WHERE slug = '" . $RCC3015504E6FBA9161EDE5F1666120EA['READ'] . "'";     Db::getInstance()->Execute($R130D64A4AD653C91E0FD80DE8FEADC3A);    }       if($RCC32DA8337A77C457B8814418780757C == 1)    {     $R130D64A4AD653C91E0FD80DE8FEADC3A = "INSERT INTO `"._DB_PREFIX_."access` (`id_profile`, `id_authorization_role`) SELECT $R44B1740495C3DC5BAB56D0F3706FEA4F AS id_profile, `id_authorization_role` FROM  `"._DB_PREFIX_."authorization_role` WHERE slug = '" . $RCC3015504E6FBA9161EDE5F1666120EA['UPDATE'] . "'";     Db::getInstance()->Execute($R130D64A4AD653C91E0FD80DE8FEADC3A);    }    if($R372F5BCB71056A4D022E984BF2099806 == 1)    {     $R130D64A4AD653C91E0FD80DE8FEADC3A = "INSERT INTO `"._DB_PREFIX_."access` (`id_profile`, `id_authorization_role`) SELECT $R44B1740495C3DC5BAB56D0F3706FEA4F AS id_profile, `id_authorization_role` FROM  `"._DB_PREFIX_."authorization_role` WHERE slug = '" . $RCC3015504E6FBA9161EDE5F1666120EA['CREATE'] . "'";     Db::getInstance()->Execute($R130D64A4AD653C91E0FD80DE8FEADC3A);    }    if($R3AA041D3204639AA7E79B914AB91B756 == 1)    {     $R130D64A4AD653C91E0FD80DE8FEADC3A = "INSERT INTO `"._DB_PREFIX_."access` (`id_profile`, `id_authorization_role`) SELECT $R44B1740495C3DC5BAB56D0F3706FEA4F AS id_profile, `id_authorization_role` FROM  `"._DB_PREFIX_."authorization_role` WHERE slug = '" . $RCC3015504E6FBA9161EDE5F1666120EA['DELETE'] . "'";     Db::getInstance()->Execute($R130D64A4AD653C91E0FD80DE8FEADC3A);    }   }     }    public static function init_tab_prmission_for_existing_profiles($R2410B7EDD6BA98362DC9D71833C36286,  $RF98A10D2AC610C20526E3F191C1072F1, $R9A7D8CD5AD8135D269B8B0D4E22B244A, $RE43C1387B0E5691A62EAA70DED4247BF, $R3AA041D3204639AA7E79B914AB91B756)  {   $RB10E8575D7A5B4C417D9DCF8D6BC17BE = Context::getContext();      $RA288066D7D26535F0DFF9FBDA9BD760C = Profile::getProfiles($RB10E8575D7A5B4C417D9DCF8D6BC17BE->language->id);   $R2EAC329B6BE1F85AFE4C271D62A89AB3 = (int)Configuration::get('AGILE_MS_PROFILE_ID');   foreach($RA288066D7D26535F0DFF9FBDA9BD760C as $RE5598755432172B63409FCEB9FDBA324)   {       if($RE5598755432172B63409FCEB9FDBA324['id_profile'] == $R2EAC329B6BE1F85AFE4C271D62A89AB3)continue;     self::update_access((int)$RE5598755432172B63409FCEB9FDBA324['id_profile'],$R2410B7EDD6BA98362DC9D71833C36286, $RF98A10D2AC610C20526E3F191C1072F1, $R9A7D8CD5AD8135D269B8B0D4E22B244A, $RE43C1387B0E5691A62EAA70DED4247BF, $R3AA041D3204639AA7E79B914AB91B756);   }  }   public static function init_profile_prmission_for_existing_tabs($R44B1740495C3DC5BAB56D0F3706FEA4F, $RF98A10D2AC610C20526E3F191C1072F1, $R9A7D8CD5AD8135D269B8B0D4E22B244A, $RE43C1387B0E5691A62EAA70DED4247BF, $R3AA041D3204639AA7E79B914AB91B756)  {   $RB10E8575D7A5B4C417D9DCF8D6BC17BE = Context::getContext();      $RC3F2753B55C03387565C5F34A392D591 = Tab::getTabs($RB10E8575D7A5B4C417D9DCF8D6BC17BE->language->id);   foreach($RC3F2753B55C03387565C5F34A392D591 as $R158C6B3B1C965555A15B0101B8F7376B)   {    self::update_access($R44B1740495C3DC5BAB56D0F3706FEA4F,$R158C6B3B1C965555A15B0101B8F7376B['class_name'], $RF98A10D2AC610C20526E3F191C1072F1, $R9A7D8CD5AD8135D269B8B0D4E22B244A, $RE43C1387B0E5691A62EAA70DED4247BF, $R3AA041D3204639AA7E79B914AB91B756);   }  }     public static function add_field_ifnotexists($R90E8291866BD6CB7ED5089CE7E833D11,$R4454E360FFF252043E577C8411615F0E,$RBD5F779F80A7E05A74D0DB403ABB83D8,$R273AC57C7CB899EED8313DE5EA899717)     {         if(empty($R90E8291866BD6CB7ED5089CE7E833D11) OR empty($R4454E360FFF252043E577C8411615F0E) OR empty($RBD5F779F80A7E05A74D0DB403ABB83D8))return;                  if(!self::column_exists($R90E8291866BD6CB7ED5089CE7E833D11,$R4454E360FFF252043E577C8411615F0E))   {    $R130D64A4AD653C91E0FD80DE8FEADC3A = 'ALTER TABLE ' . _DB_PREFIX_ . '' . $R90E8291866BD6CB7ED5089CE7E833D11 . ' ADD ' . $R4454E360FFF252043E577C8411615F0E . ' ' . $RBD5F779F80A7E05A74D0DB403ABB83D8 . ' NULL';       if($R273AC57C7CB899EED8313DE5EA899717 != '')$R130D64A4AD653C91E0FD80DE8FEADC3A .= ' DEFAULT ' . $R273AC57C7CB899EED8313DE5EA899717;    $R130D64A4AD653C91E0FD80DE8FEADC3A .= ';';    Db::getInstance()->Execute($R130D64A4AD653C91E0FD80DE8FEADC3A);   }     }          public static function add_index_ifnotexists($R90E8291866BD6CB7ED5089CE7E833D11,$R4454E360FFF252043E577C8411615F0E)     {      if(empty($R90E8291866BD6CB7ED5089CE7E833D11) OR empty($R4454E360FFF252043E577C8411615F0E))return;           if(!self::index_exists($R90E8291866BD6CB7ED5089CE7E833D11,$R4454E360FFF252043E577C8411615F0E))      {       $R130D64A4AD653C91E0FD80DE8FEADC3A = 'ALTER TABLE ' . _DB_PREFIX_ . '' . $R90E8291866BD6CB7ED5089CE7E833D11 . ' ADD INDEX idx_' . $R4454E360FFF252043E577C8411615F0E . '('. $R4454E360FFF252043E577C8411615F0E . ')';       Db::getInstance()->Execute($R130D64A4AD653C91E0FD80DE8FEADC3A);      }     }      public static function show_agile_links()     {         $R1B9FD16084D6960D66540A6219B1C6AC = 'http://addons-modules.com/store/en/content/category/2-user-s-guide';         $R52B06312E7667E978C69AA143EF1B10C = 'http://addons-modules.com/forum/';         $R617835E6648ED2650DEF74E7E2442159 = 'http://twitter.com/agilemodules/';         $R93765EA06E6D9D7617A0935DFFBFE421 = 'http://facebook.com/agilemodules';   $RC1DFF5450AF49AC7C5CC280CC9F060A7 = 'http://www.youtube.com/channel/UCD7EEoEiGgxjNpoj4u2T3Rg';   return '         <div style="border:dotted 1px blue;padding:10px">             <b>' . Tools::displayError('Need help?'). '</b>             ' . Tools::displayError(' Watch our video tutorial videos on '). '<a href="' . $RC1DFF5450AF49AC7C5CC280CC9F060A7 .'" target="help" style="text-decoration:underline;color:Blue;">' . Tools::displayError('YouTube'). '</a>&nbsp;             ' . Tools::displayError(',find answers in our '). '<a href="' . $R1B9FD16084D6960D66540A6219B1C6AC .'" target="help" style="text-decoration:underline;color:Blue;">' . Tools::displayError('User\'s Guide'). '</a>&nbsp;             ' . Tools::displayError('or get support in our '). '<a href="' . $R52B06312E7667E978C69AA143EF1B10C . '"  target="help" style="text-decoration:underline;color:Blue;">Agile Support Forum</a><br>             <b>' . Tools::displayError('Stay in touch!'). '</b>             ' . Tools::displayError(' Follow us on '). '<a href="' . $R617835E6648ED2650DEF74E7E2442159 . '"  target="help" style="text-decoration:underline;color:Blue;">Twitter </a>&nbsp;             ' . Tools::displayError(' and Like us on '). '<a href="' . $R93765EA06E6D9D7617A0935DFFBFE421 . '"  target="help" style="text-decoration:underline;color:Blue;">Facebook</a>         </div>         <br />         ';     }          public static function column_exists($R90E8291866BD6CB7ED5089CE7E833D11,$RCF260D4FB62042211810D7076C005311)    {        $R130D64A4AD653C91E0FD80DE8FEADC3A = "show columns from " . _DB_PREFIX_ . $R90E8291866BD6CB7ED5089CE7E833D11;       $R617EFB138DF2DC19B0CE4F42D3E9F81D = Db::getInstance()->ExecuteS($R130D64A4AD653C91E0FD80DE8FEADC3A);        foreach($R617EFB138DF2DC19B0CE4F42D3E9F81D AS $R3E33E017CD76B9B7E6C7364FB91E2E90)        {            if(strtolower($R3E33E017CD76B9B7E6C7364FB91E2E90['Field']) == strtolower($RCF260D4FB62042211810D7076C005311))return true;        }                return false;    }        public static function index_exists($R90E8291866BD6CB7ED5089CE7E833D11,$R4454E360FFF252043E577C8411615F0E)    {     $R130D64A4AD653C91E0FD80DE8FEADC3A = "show index from " . _DB_PREFIX_ . $R90E8291866BD6CB7ED5089CE7E833D11;     $R617EFB138DF2DC19B0CE4F42D3E9F81D = Db::getInstance()->ExecuteS($R130D64A4AD653C91E0FD80DE8FEADC3A);     foreach($R617EFB138DF2DC19B0CE4F42D3E9F81D AS $R3E33E017CD76B9B7E6C7364FB91E2E90)     {      if(strtolower($R3E33E017CD76B9B7E6C7364FB91E2E90['Column_name']) == strtolower($R4454E360FFF252043E577C8411615F0E))return true;     }           return false;    }      public static function createLinkedOrderState($R3F65DD4FB9C104263F58D46B99F912D1)     {         $R130D64A4AD653C91E0FD80DE8FEADC3A = 'SELECT id_order_state FROM `'._DB_PREFIX_.'order_state_lang` WHERE name=\'' . $R3F65DD4FB9C104263F58D46B99F912D1 . '\'';         $R58C4302894F48E8B96DCA49E94913761 = (int)Db::getInstance()->getValue($R130D64A4AD653C91E0FD80DE8FEADC3A);         if($R58C4302894F48E8B96DCA49E94913761 >0)return new OrderState($R58C4302894F48E8B96DCA49E94913761);    $R7B981F54FB9361B2EB5197DDF1B535AA = new OrderState();   $R7B981F54FB9361B2EB5197DDF1B535AA->id = 0;      $R7B981F54FB9361B2EB5197DDF1B535AA->invoice = 0;      $R7B981F54FB9361B2EB5197DDF1B535AA->send_email = 0;      $R7B981F54FB9361B2EB5197DDF1B535AA->color = '#FFFFBB';                 $R7B981F54FB9361B2EB5197DDF1B535AA->unremovable = 1;      $R7B981F54FB9361B2EB5197DDF1B535AA->hidden = 0;         $R7B981F54FB9361B2EB5197DDF1B535AA->logable = 0;         $R7B981F54FB9361B2EB5197DDF1B535AA->delivery = 0;    $RE4383934787B83B49DDB150913CF42D2 = Language::getLanguages();   foreach ($RE4383934787B83B49DDB150913CF42D2 AS $R739F6542BB76E1DDEC494F839F85A06E)   {      $R7B981F54FB9361B2EB5197DDF1B535AA->{'name'}[intval($R739F6542BB76E1DDEC494F839F85A06E['id_lang'])] = $R3F65DD4FB9C104263F58D46B99F912D1;      $R7B981F54FB9361B2EB5197DDF1B535AA->{'template'}[intval($R739F6542BB76E1DDEC494F839F85A06E['id_lang'])] = '';         }      $R7B981F54FB9361B2EB5197DDF1B535AA->add();          return $R7B981F54FB9361B2EB5197DDF1B535AA;     }    public static function CanModuleOverride($R846A3CDCEA551D8FBB972DA643DB3CFC)  {   $R0EB1982D9BAA9716AC37A8F047D5800D = array();      include_once(_PS_ROOT_DIR_ . '/modules/agilekernel/agilekernel.php');    $REE972A0783AB57BCE82A32489BCA96AB = new AgileKernel();    $R40D04F3BEE64F48CB2A1EDD0A389D5A5 = $REE972A0783AB57BCE82A32489BCA96AB->shared_override_needs_install($R846A3CDCEA551D8FBB972DA643DB3CFC);    $RA0CE1806629AEA4A2C198FCB4482C626 = $REE972A0783AB57BCE82A32489BCA96AB->can_install_shared_overrides($R40D04F3BEE64F48CB2A1EDD0A389D5A5);    if(!empty($RA0CE1806629AEA4A2C198FCB4482C626))$R0EB1982D9BAA9716AC37A8F047D5800D = array_merge($R0EB1982D9BAA9716AC37A8F047D5800D, $RA0CE1806629AEA4A2C198FCB4482C626);      if(empty($R0EB1982D9BAA9716AC37A8F047D5800D))   {    $RA0CE1806629AEA4A2C198FCB4482C626 = $REE972A0783AB57BCE82A32489BCA96AB->install_shared_override($R40D04F3BEE64F48CB2A1EDD0A389D5A5, $R846A3CDCEA551D8FBB972DA643DB3CFC);     if(!empty($RA0CE1806629AEA4A2C198FCB4482C626))$R0EB1982D9BAA9716AC37A8F047D5800D = array_merge($R0EB1982D9BAA9716AC37A8F047D5800D, $RA0CE1806629AEA4A2C198FCB4482C626);   }      $R4D13F23606613682494DAB04A33057E8 =  _PS_ROOT_DIR_ .DIRECTORY_SEPARATOR .'modules' .DIRECTORY_SEPARATOR . $R846A3CDCEA551D8FBB972DA643DB3CFC .DIRECTORY_SEPARATOR. 'override';   if (!is_dir($R4D13F23606613682494DAB04A33057E8))return $R0EB1982D9BAA9716AC37A8F047D5800D;     foreach (Tools::scandir($R4D13F23606613682494DAB04A33057E8, 'php', '', true) as $R09A33463761E506248078D422B1C5226)   {    $R2FC7C64331A9912B964483FD764310A8 = basename($R09A33463761E506248078D422B1C5226, '.php');    if (Autoload::getInstance()->getClassPath($R2FC7C64331A9912B964483FD764310A8.'Core'))    {     $R3E12158AF8F1578C982079B9CF8C0C90 = AgileInstaller::CanClassOverride($R846A3CDCEA551D8FBB972DA643DB3CFC, $R2FC7C64331A9912B964483FD764310A8);     if(!empty($R3E12158AF8F1578C982079B9CF8C0C90))$R0EB1982D9BAA9716AC37A8F047D5800D = array_merge($R0EB1982D9BAA9716AC37A8F047D5800D, $R3E12158AF8F1578C982079B9CF8C0C90);    }   }    return $R0EB1982D9BAA9716AC37A8F047D5800D;  }     public static function CanClassOverride($module2install, $classname)
	{
		$errors = array();
		
		$path = Autoload::getInstance()->getClassPath($classname.'Core');

				if (!($classpath = Autoload::getInstance()->getClassPath($classname)))return array();
		
		$override_path = _PS_ROOT_DIR_.DIRECTORY_SEPARATOR.Autoload::getInstance()->getClassPath($classname);
		if (!file_exists($override_path) || (file_exists($override_path) && !is_writable($override_path)))
			$errors[] =  sprintf(Tools::displayError('file (%s) not writable'), $override_path);

		$conflict_link = '&nbsp;&nbsp;<a href="http://addons-modules.com/store/en/content/75-classmethod-conflict-and-code-merge" target="_blank" style="color:blue;text-decoration:underline;">Why this and How to resolve this?</a>';


				$override_file = file($override_path);
		eval(preg_replace(array('#^\s*<\?php#', '#class\s+'.$classname.'\s+extends\s+([a-z0-9_]+)(\s+implements\s+([a-z0-9_]+))?#i'), array('', 'class '.$classname.'OverrideOriginalTrial'), implode('', $override_file)));
		$override_class = new ReflectionClass($classname.'OverrideOriginalTrial');

		$module_file = file(_PS_ROOT_DIR_ .DIRECTORY_SEPARATOR.'modules'.DIRECTORY_SEPARATOR . $module2install . DIRECTORY_SEPARATOR. 'override'.DIRECTORY_SEPARATOR.$path);
		eval(preg_replace(array('#^\s*<\?php#', '#class\s+'.$classname.'(\s+extends\s+([a-z0-9_]+)(\s+implements\s+([a-z0-9_]+))?)?#i'), array('', 'class '.$classname.'OverrideTrial'), implode('', $module_file)));
		$module_class = new ReflectionClass($classname.'OverrideTrial');

				foreach ($module_class->getMethods() as $method)
		{
			if ($override_class->hasMethod($method->getName()))
			{
				$errors[] = sprintf(Tools::displayError('The method %1$s in the class %2$s is already overriden.'), $method->getName(), $classname) . $conflict_link;
			}
		}
				foreach ($module_class->getProperties() as $property)
		{
			if ($override_class->hasProperty($property->getName()))
			{
				$errors[] = sprintf(Tools::displayError('The property %1$s in the class %2$s is already defined.'), $property->getName(), $classname) . $conflict_link;
			}
		}
		return $errors;		
	}
	
	public static function version_depencies($R5457B7CBF410D3C5DBF9840957E14A4D)  {   $R0EB1982D9BAA9716AC37A8F047D5800D = array();   foreach($R5457B7CBF410D3C5DBF9840957E14A4D as $RAF437D45ECACA692F85C7549AB79036E => $R8FB7FE93CFD21C20B5FAE2413242255C)   {     if(!Module::isInstalled($RAF437D45ECACA692F85C7549AB79036E))    {     $R0EB1982D9BAA9716AC37A8F047D5800D[] = sprintf(Tools::displayError('This module requires module %1$s %2$s or above.'), $RAF437D45ECACA692F85C7549AB79036E, $R8FB7FE93CFD21C20B5FAE2413242255C);    }    else    {       include_once(_PS_ROOT_DIR_ . "/modules/" . $RAF437D45ECACA692F85C7549AB79036E . "/" . $RAF437D45ECACA692F85C7549AB79036E . ".php");     $R01787CB5A57D47DC8A648998E4A6512C = new $RAF437D45ECACA692F85C7549AB79036E();     if(version_compare($R01787CB5A57D47DC8A648998E4A6512C->version, $R8FB7FE93CFD21C20B5FAE2413242255C , '<'))     {      $R0EB1982D9BAA9716AC37A8F047D5800D[] = sprintf(Tools::displayError('This module requires module %1$s %2$s or above.'), $RAF437D45ECACA692F85C7549AB79036E, $R8FB7FE93CFD21C20B5FAE2413242255C);     }    }   }   return $R0EB1982D9BAA9716AC37A8F047D5800D;  }     public static function update_module($R01787CB5A57D47DC8A648998E4A6512C, $R8F4583E04344781960D2D22DA1CF00A6, $R6E4F14B335243BE656C65E3ED9E1B115)   {    $R0EB1982D9BAA9716AC37A8F047D5800D = array();    if(defined('_IS_AGILE_DEV_'))    {     $R0EB1982D9BAA9716AC37A8F047D5800D[] = Tools::displayError('You can not run update on Development environment.');     return $R0EB1982D9BAA9716AC37A8F047D5800D;    }        $RC5347F2F7D74AA9A844E675916514E14 = _PS_ROOT_DIR_ . "/modules/agilekernel/updates/";    if(!file_exists($RC5347F2F7D74AA9A844E675916514E14))mkdir($RC5347F2F7D74AA9A844E675916514E14);    if(!file_exists($RC5347F2F7D74AA9A844E675916514E14 . "zips"))mkdir($RC5347F2F7D74AA9A844E675916514E14 . "zips");    if(!file_exists($RC5347F2F7D74AA9A844E675916514E14 . "backups"))mkdir($RC5347F2F7D74AA9A844E675916514E14 . "backups");    if(!file_exists($RC5347F2F7D74AA9A844E675916514E14 . "modules"))mkdir($RC5347F2F7D74AA9A844E675916514E14 . "modules");      if(empty($R01787CB5A57D47DC8A648998E4A6512C))$R0EB1982D9BAA9716AC37A8F047D5800D[] = Tools::displayError('Invalid module name to update');    if(empty($R8F4583E04344781960D2D22DA1CF00A6))$R0EB1982D9BAA9716AC37A8F047D5800D[] = Tools::displayError('Invalid version to update');    if(empty($R6E4F14B335243BE656C65E3ED9E1B115))$R0EB1982D9BAA9716AC37A8F047D5800D[] = Tools::displayError('Invalid url to update');    if(!empty($R0EB1982D9BAA9716AC37A8F047D5800D))return $R0EB1982D9BAA9716AC37A8F047D5800D;        $R44E39EE83C54BB5B92318749AE3832C7 = Module::getInstanceByName($R01787CB5A57D47DC8A648998E4A6512C);    if(version_compare($R8F4583E04344781960D2D22DA1CF00A6, $R44E39EE83C54BB5B92318749AE3832C7->version, "<="))$R0EB1982D9BAA9716AC37A8F047D5800D[] = Tools::displayError('The version to update is less than or eauql to current version');    if(!empty($R0EB1982D9BAA9716AC37A8F047D5800D))return $R0EB1982D9BAA9716AC37A8F047D5800D;          $RA20BDE5AFBE147622EF7AC0EA55BC5C6 = $RC5347F2F7D74AA9A844E675916514E14 . "zips/" . $R01787CB5A57D47DC8A648998E4A6512C . "-" . $R8F4583E04344781960D2D22DA1CF00A6 . ".zip";    file_put_contents($RA20BDE5AFBE147622EF7AC0EA55BC5C6, file_get_contents($R6E4F14B335243BE656C65E3ED9E1B115));          $R11B33565C5500A5CA7710A9F5AE9BE95 = $RC5347F2F7D74AA9A844E675916514E14 . "backups/" . date("YmdHis") . "-for-" . $R01787CB5A57D47DC8A648998E4A6512C ."-modulefolder.zip";     $R418A90A80D548DD0F3815B6406057C79 = $RC5347F2F7D74AA9A844E675916514E14 . "backups/" . date("YmdHis") . "-for-" . $R01787CB5A57D47DC8A648998E4A6512C ."-storeoverride.zip";     $RC2E08C971756DFF29E7A21F9C57CC075 = new AgileZipper();    $RC2E08C971756DFF29E7A21F9C57CC075->zipFolderRecusive($R11B33565C5500A5CA7710A9F5AE9BE95, _PS_ROOT_DIR_ . "/modules/" . $R01787CB5A57D47DC8A648998E4A6512C);    $RC2E08C971756DFF29E7A21F9C57CC075->zipFolderRecusive($R418A90A80D548DD0F3815B6406057C79, _PS_ROOT_DIR_ . "/override");          $RB51D41F3A4D5F2BE4A1F31F1837AF147 = Module::isInstalled($R01787CB5A57D47DC8A648998E4A6512C);    if($RB51D41F3A4D5F2BE4A1F31F1837AF147)    {     if(method_exists($R44E39EE83C54BB5B92318749AE3832C7, "uninstall4Update"))$R4002603E450F0DB8D5A7FF540344175C = $R44E39EE83C54BB5B92318749AE3832C7->uninstall4Update();     else $R4002603E450F0DB8D5A7FF540344175C = $R44E39EE83C54BB5B92318749AE3832C7->uninstall();          if(!$R4002603E450F0DB8D5A7FF540344175C)$R0EB1982D9BAA9716AC37A8F047D5800D[] = Tools::displayError('Module was not uninstalled correctly.');      }    if(!empty($R0EB1982D9BAA9716AC37A8F047D5800D))return $R0EB1982D9BAA9716AC37A8F047D5800D;            $R2F5191CEE2B82D619E5DF41B58A55140 = _PS_ROOT_DIR_ . "/modules/" . $R01787CB5A57D47DC8A648998E4A6512C;    if($R01787CB5A57D47DC8A648998E4A6512C != 'agilekernel')    {     if(!AgileHelper::RmdirRecursive($R2F5191CEE2B82D619E5DF41B58A55140))     {      $R0EB1982D9BAA9716AC37A8F047D5800D[] = Tools::displayError('Module folder cleaned up falied - some files or folder was not able to remove.');       }    }        $R5AE8874CA8599FC62FB261DA1D13BF07 = new ZipArchive;    if ($R5AE8874CA8599FC62FB261DA1D13BF07->open($RA20BDE5AFBE147622EF7AC0EA55BC5C6) === TRUE) {          $R5AE8874CA8599FC62FB261DA1D13BF07->extractTo(_PS_ROOT_DIR_ . "/modules");     $R5AE8874CA8599FC62FB261DA1D13BF07->close();    }    else    {     $R0EB1982D9BAA9716AC37A8F047D5800D[] = Tools::displayError('Downloaded zip package is not a valid zip file or damaged.');    }    if(!empty($R0EB1982D9BAA9716AC37A8F047D5800D))return $R0EB1982D9BAA9716AC37A8F047D5800D;      $R44E39EE83C54BB5B92318749AE3832C7 = Module::getInstanceByName($R01787CB5A57D47DC8A648998E4A6512C);    if(!mobj)    {     $R0EB1982D9BAA9716AC37A8F047D5800D[] = Tools::displayError('Not able to load instance of module [$R01787CB5A57D47DC8A648998E4A6512C]');    }    if(!empty($R0EB1982D9BAA9716AC37A8F047D5800D))return $R0EB1982D9BAA9716AC37A8F047D5800D;        if($RB51D41F3A4D5F2BE4A1F31F1837AF147)    {     if(!$R44E39EE83C54BB5B92318749AE3832C7->install())      $R0EB1982D9BAA9716AC37A8F047D5800D = arrey_merge($R0EB1982D9BAA9716AC37A8F047D5800D, $R44E39EE83C54BB5B92318749AE3832C7->$R0EB1982D9BAA9716AC37A8F047D5800D);    }    return $R0EB1982D9BAA9716AC37A8F047D5800D;  }      public static function cleanup_old_installation()  {   $R0E50532F705BA890C56DC90FC3472539 = AgileInstaller::detect_admin_folder($_SERVER['SCRIPT_FILENAME']);   $RA279E72759B585B5FE9D78B5CF755E16 = array(    'override/classes/controller/AdminController.php'     ,'override/classes/controller/FrontController.php'    ,'override/classes/controller/ModuleFrontController.php'     ,'override/classes/controller/ModuleAdminController.php'       ,'override/classes/AdminTab.php'    ,'override/classes/Attachment.php'     ,'override/classes/Carrier.php'     ,'override/classes/Category.php'     ,'override/classes/Customer.php'     ,'override/classes/Cart.php'     ,'override/classes/Dispatcher.php'     ,'override/classes/Employee.php'    ,'override/classes/Link.php'    ,'override/classes/Language.php'     ,'override/classes/Mail.php'    ,'override/classes/Manufacturer.php'     ,'override/classes/ObjectModel.php'     ,'override/classes/PaymentModule.php'    ,'override/classes/Product.php'     ,'override/classes/ProductDownload.php'     ,'override/classes/ProductSale.php'     ,'override/classes/Search.php'     ,'override/classes/Tools.php'     ,'override/classes/helper/HelperList.php'     ,'override/classes/module/Module.php'     ,'override/classes/order/Order.php'    ,'override/classes/pdf/HTMLTemplate.php'    ,'override/classes/shop/Shop.php'     ,'override/controllers/admin/AdminAddressesController.php'     ,'override/controllers/admin/AdminCarriersController.php'     ,'override/controllers/admin/AdminCarrierWizardController.php'     ,'override/controllers/admin/AdminCategoriesController.php'     ,'override/controllers/admin/AdminCustomersController.php'     ,'override/controllers/admin/AdminEmployeesController.php'     ,'override/controllers/admin/AdminFeaturesController.php'     ,'override/controllers/admin/AdminLanguagesController.php'     ,'override/controllers/admin/AdminLoginController.php'     ,'override/controllers/admin/AdminManufacturersController.php'     ,'override/controllers/admin/AdminOrdersController.php'     ,'override/controllers/admin/AdminProductsController.php'     ,'override/controllers/admin/AdminReturnController.php'     ,'override/controllers/admin/AdminShippingController.php'     ,'override/controllers/admin/AdminPreferencesController.php'    ,'override/controllers/admin/AdminShopController.php'     ,'override/controllers/admin/AdminShopGroupController.php'     ,'override/controllers/admin/AdminShopUrlController.php'     ,'override/controllers/front/AuthController.php'     ,'override/controllers/front/ProductController.php'     ,'override/controllers/front/OrderController.php'     ,'override/controllers/front/OrderOpcController.php'    );   $R66FB6C058110F0E30204D9CAC6A8ACC0 = array();   foreach($RA279E72759B585B5FE9D78B5CF755E16 as $R09A33463761E506248078D422B1C5226)   {    if(empty($R09A33463761E506248078D422B1C5226))continue;    if(strlen($R09A33463761E506248078D422B1C5226) >=5 AND substr($R09A33463761E506248078D422B1C5226,0,5) == "admin")    {     $R09A33463761E506248078D422B1C5226 = $R0E50532F705BA890C56DC90FC3472539 . substr($R09A33463761E506248078D422B1C5226,5);         }    $R1561E4412460AB6B1F613D8F8538EC4E = explode("/", $R09A33463761E506248078D422B1C5226);    $R3656889A448A7AF799D2D7955BED2354 = array_pop($R1561E4412460AB6B1F613D8F8538EC4E);    $R3435986BDA8C9393E0EBDB9F58F02750 = implode("/",$R1561E4412460AB6B1F613D8F8538EC4E);     $R3D9A15F4B89CA8D0B5D6EC97AB1D0799 = _PS_ROOT_DIR_ . (empty($R3435986BDA8C9393E0EBDB9F58F02750)? "":  "/" . $R3435986BDA8C9393E0EBDB9F58F02750);    $R68058C26A425390F6D97B50BDA31B0E7 = $R3D9A15F4B89CA8D0B5D6EC97AB1D0799 . "/bak";    $RD7DA097218F83408996FD1B0582AE0ED = $R3D9A15F4B89CA8D0B5D6EC97AB1D0799 . "/" . $R3656889A448A7AF799D2D7955BED2354;    if(!file_exists($R68058C26A425390F6D97B50BDA31B0E7))mkdir($R68058C26A425390F6D97B50BDA31B0E7);     if(file_exists($RD7DA097218F83408996FD1B0582AE0ED))    {     $R5AE78B05336F05E5F8094C4167E489AC = floatval(self::get_build_id($RD7DA097218F83408996FD1B0582AE0ED));     $RC3F87C1105749B4DB9EA7F3903F49A59 = $R68058C26A425390F6D97B50BDA31B0E7 . "/" . $R3656889A448A7AF799D2D7955BED2354 . ".last";     if($R5AE78B05336F05E5F8094C4167E489AC >0 && $R5AE78B05336F05E5F8094C4167E489AC < 2013092401.0101)     {      rename($RD7DA097218F83408996FD1B0582AE0ED , $RC3F87C1105749B4DB9EA7F3903F49A59);     }    }      }  }    public static function tabHasChildren($R426A2302D481ACC992F8794B3AA4931B)  {   $R6680333E75737B6D7C380492DF94CB6F = self::getTabIDByClassName($R426A2302D481ACC992F8794B3AA4931B);   $R130D64A4AD653C91E0FD80DE8FEADC3A = "SELECT COUNT(*) FROM " . _DB_PREFIX_ ."tab WHERE id_parent=" . (int)$R6680333E75737B6D7C380492DF94CB6F;   $RC8FD32E12E64A95B738412272EA38028 = Db::getInstance()->getValue($R130D64A4AD653C91E0FD80DE8FEADC3A);   return ($RC8FD32E12E64A95B738412272EA38028 > 0);  }       public static function ensureSellerReadModulePermission($R44B1740495C3DC5BAB56D0F3706FEA4F, $RE0F1236F8519D5BBAACA70F5F405678E)  {   if((int)$R44B1740495C3DC5BAB56D0F3706FEA4F <=0)return;   foreach($RE0F1236F8519D5BBAACA70F5F405678E as $R7C60D7E1C05E3B82EF26F41346F5D850)   {    $R130D64A4AD653C91E0FD80DE8FEADC3A = 'REPLACE INTO ' . _DB_PREFIX_ . 'module_access (id_authorization_role,id_profile)      SELECT r.id_authorization_role, '  . $R44B1740495C3DC5BAB56D0F3706FEA4F . ' as id_profile       FROM `' . _DB_PREFIX_ . 'authorization_role` r        LEFT JOIN ' . _DB_PREFIX_ . 'module_access a ON r.id_authorization_role = a.id_authorization_role AND a.id_profile = ' . $R44B1740495C3DC5BAB56D0F3706FEA4F . '      WHERE r.slug like \'ROLE_MOD_MODULE_%_' . $R7C60D7E1C05E3B82EF26F41346F5D850 . '\'       and a.id_authorization_role IS NULL      ';     DB::getInstance()->Execute($R130D64A4AD653C91E0FD80DE8FEADC3A);    }   }    public static function enableAllPaymentModulesForCarrier($R0ACBF3334E5196BD6BFD3ADC13786C4C, $R368F0365A446C4BDF2D2FCA04DF2B35B)  {   if((int)$R0ACBF3334E5196BD6BFD3ADC13786C4C <=0 || (int)$R368F0365A446C4BDF2D2FCA04DF2B35B <=0)return;   $R53CED8F460F10F938CCEC04FE634E4D3 = new Carrier($R0ACBF3334E5196BD6BFD3ADC13786C4C);   $R4D1B20585F5E90178187AC0090AC2F2F = AgileHelper::getAllPaymentModules($R368F0365A446C4BDF2D2FCA04DF2B35B);   $R8C02CA0FC4934241D2F153A4C20E11CA = array();   foreach($R4D1B20585F5E90178187AC0090AC2F2F as $R01787CB5A57D47DC8A648998E4A6512C)   {    if(!in_array($R53CED8F460F10F938CCEC04FE634E4D3->id_reference, $R01787CB5A57D47DC8A648998E4A6512C->reference))$R8C02CA0FC4934241D2F153A4C20E11CA[] = $R01787CB5A57D47DC8A648998E4A6512C->id;   }   if(empty($R8C02CA0FC4934241D2F153A4C20E11CA))return;      $R130D64A4AD653C91E0FD80DE8FEADC3A = 'INSERT INTO ' . _DB_PREFIX_ . 'module_carrier (id_module, id_shop, id_reference) VALUES ';   $R5B92E56774920499F4ADDD0EC782C83E = 0;   foreach($R8C02CA0FC4934241D2F153A4C20E11CA as $R6952C18BEC7BA25FC6990F5A975DAD4E)   {    if($R5B92E56774920499F4ADDD0EC782C83E > 0)$R130D64A4AD653C91E0FD80DE8FEADC3A = $R130D64A4AD653C91E0FD80DE8FEADC3A  . ',';    $R130D64A4AD653C91E0FD80DE8FEADC3A = $R130D64A4AD653C91E0FD80DE8FEADC3A . '(' . $R6952C18BEC7BA25FC6990F5A975DAD4E . ',' . $R368F0365A446C4BDF2D2FCA04DF2B35B . ',' . $R53CED8F460F10F938CCEC04FE634E4D3->id_reference . ')';    $R5B92E56774920499F4ADDD0EC782C83E++;   }   Db::getInstance()->Execute($R130D64A4AD653C91E0FD80DE8FEADC3A);  }   } 