<?php
///-build_id: 2017010210.404
/// This source file is subject to the Software License Agreement that is bundled with this 
/// package in the file license.txt, or you can get it here
/// http://addons-modules.com/en/content/3-terms-and-conditions-of-use
///
/// @copyright  2009-2016 Addons-Modules.com
///  If you need open code to customize or merge code with othe modules, please contact us.
use PrestaShop\PrestaShop\Core\Addon\Module\ModuleManagerBuilder;

class AgileHelperCore
{
		public static function getPageName()   {    $R71A6FD054F6EBC38E69167AB39449848 = $_SERVER["SCRIPT_NAME"];    $R5B92E56774920499F4ADDD0EC782C83E = strrpos($R71A6FD054F6EBC38E69167AB39449848,"/");    $R034AE2AB94F99CC81B389A1822DA3353 = strtolower(substr($R71A6FD054F6EBC38E69167AB39449848,$R5B92E56774920499F4ADDD0EC782C83E+1));    if(_PS_VERSION_ > '1.5' AND $R034AE2AB94F99CC81B389A1822DA3353 == 'index.php' AND isset($_GET['controller']) AND !empty($_GET['controller']))    {     $R034AE2AB94F99CC81B389A1822DA3353 = strtolower(Tools::getValue("controller")) . ".php";    }    return $R034AE2AB94F99CC81B389A1822DA3353;   }         public static function getDbDateTime($RE7EC1432BD9A4B41F247FBF98A4A1883, $RB432FBB490B6477825AFE020457DC3A2)   {    $R130D64A4AD653C91E0FD80DE8FEADC3A = "SELECT NOW() AS timenow, DATE_ADD(NOW(),INTERVAL $RE7EC1432BD9A4B41F247FBF98A4A1883 $RB432FBB490B6477825AFE020457DC3A2) as newtime";      return Db::getInstance()->getRow($R130D64A4AD653C91E0FD80DE8FEADC3A);   }      public static function agile_log($RDD95BBEC198B2C577F5B3E60A5984492)   {    $RD9A93554B5AF46132E19F5DCFCD27AB5 = fopen(_PS_ROOT_DIR_ . "/debug.log", "a+");      if(!$RD9A93554B5AF46132E19F5DCFCD27AB5)return;    fwrite($RD9A93554B5AF46132E19F5DCFCD27AB5, date("Y-m-d H:i:s") . "," . $RDD95BBEC198B2C577F5B3E60A5984492 . "\r\n");    fclose($RD9A93554B5AF46132E19F5DCFCD27AB5);   }      public static function agile_log_array($R7318A606A3118D468DAE7078098FBA7B)   {    $RDD95BBEC198B2C577F5B3E60A5984492 = '';    foreach ($R7318A606A3118D468DAE7078098FBA7B AS $RF413F06AEBBCEF5E1C8B1019DEE6FE6B => $R7D0596C36891967F3BB9D994B4A97C19)     $RDD95BBEC198B2C577F5B3E60A5984492 .= '&'.$RF413F06AEBBCEF5E1C8B1019DEE6FE6B.'='.urlencode(stripslashes($R7D0596C36891967F3BB9D994B4A97C19));      AgileHelper::agile_log($RDD95BBEC198B2C577F5B3E60A5984492);   }      public static function retrieve_column_values($RDDC2BF43338865F2094D7F8E381BEFD2, $RCF260D4FB62042211810D7076C005311, $RE4C0DEA5CA7299231AE0AE6490689E14=true)   {    if(empty($RCF260D4FB62042211810D7076C005311) OR empty($RDDC2BF43338865F2094D7F8E381BEFD2) OR !is_array($RDDC2BF43338865F2094D7F8E381BEFD2))return '';    $R66FB6C058110F0E30204D9CAC6A8ACC0 = array();    foreach($RDDC2BF43338865F2094D7F8E381BEFD2 as $RA9209B8BAC6B9D869BF471850366DB7A)    {     if(!isset($RA9209B8BAC6B9D869BF471850366DB7A[$RCF260D4FB62042211810D7076C005311]))continue;     if(!$RE4C0DEA5CA7299231AE0AE6490689E14 AND empty($RA9209B8BAC6B9D869BF471850366DB7A[$RCF260D4FB62042211810D7076C005311]))continue;     $R66FB6C058110F0E30204D9CAC6A8ACC0[] = $RA9209B8BAC6B9D869BF471850366DB7A[$RCF260D4FB62042211810D7076C005311];    }    return $R66FB6C058110F0E30204D9CAC6A8ACC0;   }         private static function getPathFromName($R39D97A82465FB3E96FF1A50741ACC21B, $R9A1171AFEE2A056DEAA3DFDF52FF55A1, $R3D9A15F4B89CA8D0B5D6EC97AB1D0799)   {    if($R9A1171AFEE2A056DEAA3DFDF52FF55A1 == 1)return "/" . $R3D9A15F4B89CA8D0B5D6EC97AB1D0799;    if(!isset($R39D97A82465FB3E96FF1A50741ACC21B[$R9A1171AFEE2A056DEAA3DFDF52FF55A1]))return $R3D9A15F4B89CA8D0B5D6EC97AB1D0799;    if(!empty($R3D9A15F4B89CA8D0B5D6EC97AB1D0799)) $R3D9A15F4B89CA8D0B5D6EC97AB1D0799 = "/" . $R3D9A15F4B89CA8D0B5D6EC97AB1D0799;    $R3D9A15F4B89CA8D0B5D6EC97AB1D0799 = $R39D97A82465FB3E96FF1A50741ACC21B[$R9A1171AFEE2A056DEAA3DFDF52FF55A1]['name'] . $R3D9A15F4B89CA8D0B5D6EC97AB1D0799;    if($R39D97A82465FB3E96FF1A50741ACC21B[$R9A1171AFEE2A056DEAA3DFDF52FF55A1]['id_parent'] > 0)$R3D9A15F4B89CA8D0B5D6EC97AB1D0799 = self::getPathFromName($R39D97A82465FB3E96FF1A50741ACC21B, $R39D97A82465FB3E96FF1A50741ACC21B[$R9A1171AFEE2A056DEAA3DFDF52FF55A1]['id_parent'], $R3D9A15F4B89CA8D0B5D6EC97AB1D0799);    return $R3D9A15F4B89CA8D0B5D6EC97AB1D0799;   }       public static function getSortedFullnameCategory($R86D82919EBF34F5D78D069DC255D11BD)   {    $R664BED027957CBF185B36902806A7CF3 = array();    if(!empty($R86D82919EBF34F5D78D069DC255D11BD))    {     foreach($R86D82919EBF34F5D78D069DC255D11BD as $RA62000B96F90E18E32C8E9732685E104)     {      $R664BED027957CBF185B36902806A7CF3[$RA62000B96F90E18E32C8E9732685E104['id_category']] = $RA62000B96F90E18E32C8E9732685E104;     }    }        $R7826B25C493DA7D5BAE1078521518DBF = array();    for($R5B92E56774920499F4ADDD0EC782C83E =0; $R5B92E56774920499F4ADDD0EC782C83E < count($R86D82919EBF34F5D78D069DC255D11BD); $R5B92E56774920499F4ADDD0EC782C83E++)    {     $RE146FBE4153FADBC175CB7E2E19DAF1F = $R86D82919EBF34F5D78D069DC255D11BD[$R5B92E56774920499F4ADDD0EC782C83E];      $R7826B25C493DA7D5BAE1078521518DBF[$RE146FBE4153FADBC175CB7E2E19DAF1F['id_category']] =  self::getPathFromName($R664BED027957CBF185B36902806A7CF3,$RE146FBE4153FADBC175CB7E2E19DAF1F['id_category'], "");    }      unset($R664BED027957CBF185B36902806A7CF3);      asort($R7826B25C493DA7D5BAE1078521518DBF);    $R30E38C1F8EC85F8EE8DF620FF3267157 = array();    $RA272EED39CFB584BB555165E3C9AA882 = Category::getRootCategory();    $R75FBBCCDA25F2D885FD8776757F8BE85 = isset($R7826B25C493DA7D5BAE1078521518DBF[$RA272EED39CFB584BB555165E3C9AA882->id]) ? $R7826B25C493DA7D5BAE1078521518DBF[$RA272EED39CFB584BB555165E3C9AA882->id] : '';    $R9C4E8E14322B9E1646D3B53B8FB1B81E = strlen($R75FBBCCDA25F2D885FD8776757F8BE85);    foreach($R7826B25C493DA7D5BAE1078521518DBF as $R3584859062EA9ECFB39B93BFCEF8E869=>$R9B395079675C6A66FF23EA9C6C4A668E)    {     if(strlen($R9B395079675C6A66FF23EA9C6C4A668E) >= $R9C4E8E14322B9E1646D3B53B8FB1B81E &&  substr($R9B395079675C6A66FF23EA9C6C4A668E, 0, $R9C4E8E14322B9E1646D3B53B8FB1B81E) == $R75FBBCCDA25F2D885FD8776757F8BE85)     {      $R30E38C1F8EC85F8EE8DF620FF3267157[] = array('id_category' => $R3584859062EA9ECFB39B93BFCEF8E869, 'name' => $R9B395079675C6A66FF23EA9C6C4A668E);     }    }    unset($R7826B25C493DA7D5BAE1078521518DBF);      return $R30E38C1F8EC85F8EE8DF620FF3267157;   }       public static function AssignProductImgs($R743CE00DE0F4FEA746D03BBAE2968D01)   {    $R4C777A7DAA5F23A4ABE69AB5983374B4=array();    for($RA16D2280393CE6A2A5428A4A8D09E354=0;$RA16D2280393CE6A2A5428A4A8D09E354<count($R743CE00DE0F4FEA746D03BBAE2968D01);$RA16D2280393CE6A2A5428A4A8D09E354++)    {     if(isset($R743CE00DE0F4FEA746D03BBAE2968D01[$RA16D2280393CE6A2A5428A4A8D09E354]['id_product']))      $R4C777A7DAA5F23A4ABE69AB5983374B4[$R743CE00DE0F4FEA746D03BBAE2968D01[$RA16D2280393CE6A2A5428A4A8D09E354]['id_product']]= AgileHelper::getProductImgs($R743CE00DE0F4FEA746D03BBAE2968D01[$RA16D2280393CE6A2A5428A4A8D09E354]['id_product']);    }    Context::getContext()->smarty->assign('productimg',(isset($R4C777A7DAA5F23A4ABE69AB5983374B4) AND $R4C777A7DAA5F23A4ABE69AB5983374B4) ? $R4C777A7DAA5F23A4ABE69AB5983374B4 : NULL);   }      public static function GetProductImgs($RFB96F2F461D9A225B5DC55B0B9841710)   {    $R130D64A4AD653C91E0FD80DE8FEADC3A = '    (SELECT * from `'._DB_PREFIX_.'image`     WHERE id_product="'.$RFB96F2F461D9A225B5DC55B0B9841710.'" and cover=1)       union       (SELECT * from `'._DB_PREFIX_.'image`     WHERE id_product="'.$RFB96F2F461D9A225B5DC55B0B9841710.'" and cover=0  ORDER BY `position` LIMIT 0,1 )       LIMIT 0,2    ';    $R679E9B9234E2062F809DBD3325D37FB6 = Db::getInstance()->ExecuteS($R130D64A4AD653C91E0FD80DE8FEADC3A);    return $R679E9B9234E2062F809DBD3325D37FB6;   }       public static function GetFirstAvailableCategory()  {   $RB10E8575D7A5B4C417D9DCF8D6BC17BE = Context::getContext();        $R2AB64863F180828291D29C15DCB0D12A = Category::getRootCategory();   if($R2AB64863F180828291D29C15DCB0D12A->id > 2)return $R2AB64863F180828291D29C15DCB0D12A->id;   $R130D64A4AD653C91E0FD80DE8FEADC3A = 'SELECT c.id_category      FROM ' . _DB_PREFIX_ . 'category c       LEFT JOIN ' . _DB_PREFIX_ . 'category_lang cl ON (c.id_category=cl.id_category AND cl.id_lang=' . $RB10E8575D7A5B4C417D9DCF8D6BC17BE->language->id . ')      WHERE id_parent=' . $R2AB64863F180828291D29C15DCB0D12A->id . '     ORDER BY cl.name';      return (int)Db::getInstance()->getValue($R130D64A4AD653C91E0FD80DE8FEADC3A);  }     public static function getAllAncessors($RF664E51958D748D9CA7C7C2D6C20EC0C, $RB7F851B85796C5609BBE588C42AA7785)   {   if($RF664E51958D748D9CA7C7C2D6C20EC0C <= 2)return $RB7F851B85796C5609BBE588C42AA7785;   $R130D64A4AD653C91E0FD80DE8FEADC3A = 'SELECT id_parent FROM ' . _DB_PREFIX_ . 'category WHERE id_category=' . (int)$RF664E51958D748D9CA7C7C2D6C20EC0C;   $R8F765A2615C344CF0F1004E7F74B8CD9 = Db::getInstance()->getValue($R130D64A4AD653C91E0FD80DE8FEADC3A);   $RB7F851B85796C5609BBE588C42AA7785[] = $R8F765A2615C344CF0F1004E7F74B8CD9;   return self::getAllAncessors($R8F765A2615C344CF0F1004E7F74B8CD9, $RB7F851B85796C5609BBE588C42AA7785);  }     public static function getAllSuccessors($RC38E51FEFB6EF8CE9D73E624FC73FE84, $RA05F87FC92B46DE2E78A6A3A20C73483)   {   $R130D64A4AD653C91E0FD80DE8FEADC3A = 'SELECT id_category FROM ' . _DB_PREFIX_ . 'category WHERE id_parent=' . (int)$RC38E51FEFB6EF8CE9D73E624FC73FE84;   $RE484ED591E12CF9125AE1D47AE08748B = Db::getInstance()->ExecuteS($R130D64A4AD653C91E0FD80DE8FEADC3A);   if(empty($RE484ED591E12CF9125AE1D47AE08748B))return $RA05F87FC92B46DE2E78A6A3A20C73483;   foreach($RE484ED591E12CF9125AE1D47AE08748B as $R4EEB713E57BBAAF1217CF39632604473)   {    $RA05F87FC92B46DE2E78A6A3A20C73483[] = (int)$R4EEB713E57BBAAF1217CF39632604473['id_category'];    $RA05F87FC92B46DE2E78A6A3A20C73483 = self::getAllSuccessors($R4EEB713E57BBAAF1217CF39632604473['id_category'], $RA05F87FC92B46DE2E78A6A3A20C73483);   }   return $RA05F87FC92B46DE2E78A6A3A20C73483;  }     public static function isAncessor($RF664E51958D748D9CA7C7C2D6C20EC0C, $R8F765A2615C344CF0F1004E7F74B8CD9)  {   if($RF664E51958D748D9CA7C7C2D6C20EC0C == $R8F765A2615C344CF0F1004E7F74B8CD9)return false;   $R130D64A4AD653C91E0FD80DE8FEADC3A = 'SELECT id_parent FROM ' . _DB_PREFIX_ . 'category WHERE id_category=' . (int)$RF664E51958D748D9CA7C7C2D6C20EC0C;   $RC38E51FEFB6EF8CE9D73E624FC73FE84 = (int)Db::getInstance()->getValue($R130D64A4AD653C91E0FD80DE8FEADC3A);   if($RC38E51FEFB6EF8CE9D73E624FC73FE84 == $R8F765A2615C344CF0F1004E7F74B8CD9)return true;   if($RC38E51FEFB6EF8CE9D73E624FC73FE84 <=2)return false;   return self::isAncessor($RC38E51FEFB6EF8CE9D73E624FC73FE84, $R8F765A2615C344CF0F1004E7F74B8CD9);  }    public static function isSuccessor($RF664E51958D748D9CA7C7C2D6C20EC0C, $R67AD5E56BDBC570E914BC929142F0C75)  {   if($RF664E51958D748D9CA7C7C2D6C20EC0C == $R67AD5E56BDBC570E914BC929142F0C75)return false;   $R130D64A4AD653C91E0FD80DE8FEADC3A = 'SELECT id_category FROM ' . _DB_PREFIX_ . 'category WHERE id_parent=' . (int)$RF664E51958D748D9CA7C7C2D6C20EC0C;   $RE484ED591E12CF9125AE1D47AE08748B = Db::getInstance()->ExecuteS($R130D64A4AD653C91E0FD80DE8FEADC3A);   if(empty($RE484ED591E12CF9125AE1D47AE08748B))return false;   foreach($RE484ED591E12CF9125AE1D47AE08748B as $R4EEB713E57BBAAF1217CF39632604473)   {    if($R4EEB713E57BBAAF1217CF39632604473['id_category'] == $R67AD5E56BDBC570E914BC929142F0C75)return true;    if(self::isSuccessor($R4EEB713E57BBAAF1217CF39632604473['id_category'], $R67AD5E56BDBC570E914BC929142F0C75))return true;   }   return false;  }    public static function createProductWithBasics($RF664E51958D748D9CA7C7C2D6C20EC0C, $R9B395079675C6A66FF23EA9C6C4A668E, $R63D0786ECC7B962F8285396746DC2145, $R345FCE94610D62255E77B7CFA5D939C8=true)   {    $RB3F07F8C3658A835940E88288B58F707 = new Product();    $RE4383934787B83B49DDB150913CF42D2 = Language::getLanguages(false);    foreach($RE4383934787B83B49DDB150913CF42D2 as $R51C716B9664B3F4E109066C05B9B1A86)    {     $RB3F07F8C3658A835940E88288B58F707->name[$R51C716B9664B3F4E109066C05B9B1A86['id_lang']] = $R9B395079675C6A66FF23EA9C6C4A668E;     $RB3F07F8C3658A835940E88288B58F707->link_rewrite[$R51C716B9664B3F4E109066C05B9B1A86['id_lang']] = Tools::link_rewrite($R9B395079675C6A66FF23EA9C6C4A668E);    }        $RB3F07F8C3658A835940E88288B58F707->id_category_default = (int)$RF664E51958D748D9CA7C7C2D6C20EC0C;    $RB3F07F8C3658A835940E88288B58F707->id_shop_default = 1;    $RB3F07F8C3658A835940E88288B58F707->wholesale_price = $R63D0786ECC7B962F8285396746DC2145;    $RB3F07F8C3658A835940E88288B58F707->price = $R63D0786ECC7B962F8285396746DC2145;    $RB3F07F8C3658A835940E88288B58F707->ecotax = 0;    $RB3F07F8C3658A835940E88288B58F707->available_for_order = 1;    $RB3F07F8C3658A835940E88288B58F707->visibility = 'both';    $RB3F07F8C3658A835940E88288B58F707->is_virtual = $R345FCE94610D62255E77B7CFA5D939C8;    $RB3F07F8C3658A835940E88288B58F707->id_tax_rules_group = 0;       $RB3F07F8C3658A835940E88288B58F707->active = 1;    $RB3F07F8C3658A835940E88288B58F707->save();    $RB3F07F8C3658A835940E88288B58F707->addStockMvt(2147483647,1);        AgileHelper::setDefaultCategory($RB3F07F8C3658A835940E88288B58F707, $RF664E51958D748D9CA7C7C2D6C20EC0C);      return $RB3F07F8C3658A835940E88288B58F707;   }      public static function setDefaultCategory($RB3F07F8C3658A835940E88288B58F707, $RF664E51958D748D9CA7C7C2D6C20EC0C)  {   if(!Validate::isLoadedObject($RB3F07F8C3658A835940E88288B58F707))return;     $RB3F07F8C3658A835940E88288B58F707->id_category_default =  $RF664E51958D748D9CA7C7C2D6C20EC0C;    $R130D64A4AD653C91E0FD80DE8FEADC3A = 'DELETE FROM '. _DB_PREFIX_. 'category_product WHERE id_category=' . (int)$RF664E51958D748D9CA7C7C2D6C20EC0C . ' AND id_product=' . (int)$RB3F07F8C3658A835940E88288B58F707->id ;    Db::getinstance()->Execute($R130D64A4AD653C91E0FD80DE8FEADC3A);    $R130D64A4AD653C91E0FD80DE8FEADC3A = 'INSERT INTO '. _DB_PREFIX_. 'category_product (id_category, id_product, position) VALUES (' . (int)$RF664E51958D748D9CA7C7C2D6C20EC0C . ',' . (int)$RB3F07F8C3658A835940E88288B58F707->id . ',0)';    Db::getinstance()->Execute($R130D64A4AD653C91E0FD80DE8FEADC3A);    $RB3F07F8C3658A835940E88288B58F707->save();    }     public static function createCategoryByName($R9B395079675C6A66FF23EA9C6C4A668E)   {    $RCB6CF74D12D3949F4F3C570ECE4B9CB5 = new Category();    $RE4383934787B83B49DDB150913CF42D2 = Language::getLanguages(false);    foreach($RE4383934787B83B49DDB150913CF42D2 as $R51C716B9664B3F4E109066C05B9B1A86)    {     $RCB6CF74D12D3949F4F3C570ECE4B9CB5->name[$R51C716B9664B3F4E109066C05B9B1A86['id_lang']] = $R9B395079675C6A66FF23EA9C6C4A668E;     $RCB6CF74D12D3949F4F3C570ECE4B9CB5->link_rewrite[$R51C716B9664B3F4E109066C05B9B1A86['id_lang']] = Tools::link_rewrite($R9B395079675C6A66FF23EA9C6C4A668E);    }        $RCB6CF74D12D3949F4F3C570ECE4B9CB5->id_parent = Configuration::get('PS_HOME_CATEGORY');    $RCB6CF74D12D3949F4F3C570ECE4B9CB5->id_shop_default = 1;    $RCB6CF74D12D3949F4F3C570ECE4B9CB5->level = 2;    $RCB6CF74D12D3949F4F3C570ECE4B9CB5->is_root_category = 0;    $RCB6CF74D12D3949F4F3C570ECE4B9CB5->position = 0;    $RCB6CF74D12D3949F4F3C570ECE4B9CB5->active = 1;    $RCB6CF74D12D3949F4F3C570ECE4B9CB5->save();      return $RCB6CF74D12D3949F4F3C570ECE4B9CB5;   }      public static function addCategoryImage($RF664E51958D748D9CA7C7C2D6C20EC0C, $R6E4F14B335243BE656C65E3ED9E1B115)   {    return AgileHelper::copyImg($RF664E51958D748D9CA7C7C2D6C20EC0C, null, $R6E4F14B335243BE656C65E3ED9E1B115, $RC0A680905DC06E75DFA82485B6D34A5E = 'categories', true);     }      public static function addProductImage($R40095968F29813E02A981F327827F17B, $R6E4F14B335243BE656C65E3ED9E1B115)   {    $R6E4F14B335243BE656C65E3ED9E1B115 = trim($R6E4F14B335243BE656C65E3ED9E1B115);   if (empty($R6E4F14B335243BE656C65E3ED9E1B115))return false;;   $R6E4F14B335243BE656C65E3ED9E1B115 = str_replace(' ', '%20', $R6E4F14B335243BE656C65E3ED9E1B115);   $R5D79B0A1A35CD9360E767E491F534D9A = (bool)Image::getImages(Context::getContext()->language->id, (int)$R40095968F29813E02A981F327827F17B);    $R90B42A0A84ED04CF1E133E7D0B4C87FD = new Image();   $R90B42A0A84ED04CF1E133E7D0B4C87FD->id_product = (int)$R40095968F29813E02A981F327827F17B;   $R90B42A0A84ED04CF1E133E7D0B4C87FD->position = Image::getHighestPosition($R40095968F29813E02A981F327827F17B) + 1;   $R90B42A0A84ED04CF1E133E7D0B4C87FD->cover = $R5D79B0A1A35CD9360E767E491F534D9A ? false : true;     if ($R90B42A0A84ED04CF1E133E7D0B4C87FD->validateFields(false, true) === true &&    $R90B42A0A84ED04CF1E133E7D0B4C87FD->validateFieldsLang(false, true) === true &&     $R90B42A0A84ED04CF1E133E7D0B4C87FD->add())   {       $R90B42A0A84ED04CF1E133E7D0B4C87FD->associateTo(array(1));    return AgileHelper::copyImg($R40095968F29813E02A981F327827F17B, $R90B42A0A84ED04CF1E133E7D0B4C87FD->id, $R6E4F14B335243BE656C65E3ED9E1B115, 'products', !Tools::getValue('regenerate'));   }   return false;  }       public static function copyImg($RC31D1C285DB3C86A81FBB3431A7481E5, $R57E3D22C668CC02542BF39447A8AF0D9 = null, $R6E4F14B335243BE656C65E3ED9E1B115, $RC0A680905DC06E75DFA82485B6D34A5E = 'products', $R91A70BF172A82C87AFE54DAA01D91B7F = true)  {   $R2C44A543E44F4848B279C06C092908B7 = tempnam(_PS_TMP_IMG_DIR_, 'ps_import');   $RE9B2947C8707759EB67FEFC47C3FD22D = explode(',', Configuration::get('WATERMARK_TYPES'));    switch ($RC0A680905DC06E75DFA82485B6D34A5E)   {    default:    case 'products':     $R3CC3A4EBA6E3AC28855205AD6EB9D638 = new Image($R57E3D22C668CC02542BF39447A8AF0D9);     $R3D9A15F4B89CA8D0B5D6EC97AB1D0799 = $R3CC3A4EBA6E3AC28855205AD6EB9D638->getPathForCreation();     break;    case 'categories':     $R3D9A15F4B89CA8D0B5D6EC97AB1D0799 = _PS_CAT_IMG_DIR_.(int)$RC31D1C285DB3C86A81FBB3431A7481E5;     break;   }   $R6E4F14B335243BE656C65E3ED9E1B115 = str_replace(' ', '%20', trim($R6E4F14B335243BE656C65E3ED9E1B115));      if (!ImageManager::checkImageMemoryLimit($R6E4F14B335243BE656C65E3ED9E1B115))    return false;        if (AgileHelper::copy($R6E4F14B335243BE656C65E3ED9E1B115, $R2C44A543E44F4848B279C06C092908B7))   {    ImageManager::resize($R2C44A543E44F4848B279C06C092908B7, $R3D9A15F4B89CA8D0B5D6EC97AB1D0799.'.jpg');    $RE9F73A76D15D135995DBEBBB5A81B22A = ImageType::getImagesTypes($RC0A680905DC06E75DFA82485B6D34A5E);     if ($R91A70BF172A82C87AFE54DAA01D91B7F)     foreach ($RE9F73A76D15D135995DBEBBB5A81B22A as $R4C792B9297DBE7CB2AFCFD2333932891)     {      ImageManager::resize($R2C44A543E44F4848B279C06C092908B7, $R3D9A15F4B89CA8D0B5D6EC97AB1D0799.'-'.stripslashes($R4C792B9297DBE7CB2AFCFD2333932891['name']).'.jpg', $R4C792B9297DBE7CB2AFCFD2333932891['width'], $R4C792B9297DBE7CB2AFCFD2333932891['height']);      if (in_array($R4C792B9297DBE7CB2AFCFD2333932891['id_image_type'], $RE9B2947C8707759EB67FEFC47C3FD22D))       Hook::exec('actionWatermark', array('id_image' => $R57E3D22C668CC02542BF39447A8AF0D9, 'id_product' => $RC31D1C285DB3C86A81FBB3431A7481E5));     }   }   else   {    unlink($R2C44A543E44F4848B279C06C092908B7);    return false;   }   unlink($R2C44A543E44F4848B279C06C092908B7);   return true;  }    public static function getCountryIDbyIso($RDECEF4CB355A93715801928439CC147C)  {   $R130D64A4AD653C91E0FD80DE8FEADC3A = 'SELECT id_country FROM ' . _DB_PREFIX_ . 'country WHERE iso_code=\'' . $RDECEF4CB355A93715801928439CC147C . '\'';   return (int)Db::getInstance()->getValue($R130D64A4AD653C91E0FD80DE8FEADC3A);  }      public static function copy($R7B5C40C2661BE2363CC09FDC872AEB44, $R9B9D251DD964536E40533D36C7CD51BE, $RC7B0E805F1B9F5406F73E25C1AEC27FB = null)  {   return Tools::copy($R7B5C40C2661BE2363CC09FDC872AEB44, $R9B9D251DD964536E40533D36C7CD51BE, $RC7B0E805F1B9F5406F73E25C1AEC27FB );    }    public static function isLocalIP()   {    return ((substr($_SERVER['REMOTE_ADDR'],0,8) == "192.168.") || ($_SERVER['REMOTE_ADDR'] == "127.0.0.1"));    }      public static function recurse_copy($R8518FD4BC0DA31048BD649F3B066E6A4,$RBB8BE4BBB8BA30E2914D07A49D700E67,$R6AF8150F87F262CD8AA3A332B1698514 = true)    {     $R714CA9EB87223AD2D6815F90173FDE78 = opendir($R8518FD4BC0DA31048BD649F3B066E6A4);     @mkdir($RBB8BE4BBB8BA30E2914D07A49D700E67);     while(false !== ( $R09A33463761E506248078D422B1C5226 = readdir($R714CA9EB87223AD2D6815F90173FDE78)) )     {      if (( $R09A33463761E506248078D422B1C5226 != '.' ) && ( $R09A33463761E506248078D422B1C5226 != '..' ))      {      if ( is_dir($R8518FD4BC0DA31048BD649F3B066E6A4 . '/' . $R09A33463761E506248078D422B1C5226) )       {        AgileHelper::recurse_copy($R8518FD4BC0DA31048BD649F3B066E6A4 . '/' . $R09A33463761E506248078D422B1C5226, $RBB8BE4BBB8BA30E2914D07A49D700E67 . '/' . $R09A33463761E506248078D422B1C5226, $R6AF8150F87F262CD8AA3A332B1698514);       }       else       {        if($R6AF8150F87F262CD8AA3A332B1698514 || !file_exists($RBB8BE4BBB8BA30E2914D07A49D700E67 . '/' . $R09A33463761E506248078D422B1C5226))copy($R8518FD4BC0DA31048BD649F3B066E6A4 . '/' . $R09A33463761E506248078D422B1C5226,  $RBB8BE4BBB8BA30E2914D07A49D700E67 . '/' . $R09A33463761E506248078D422B1C5226);       }      }     }     closedir($R714CA9EB87223AD2D6815F90173FDE78);    }       public static function FixInvalidPaypalData($R7D0596C36891967F3BB9D994B4A97C19, $R53E0870B983E4C20823CCFFAD959F33C=true)   {    $R7D0596C36891967F3BB9D994B4A97C19 = str_replace("?", "", $R7D0596C36891967F3BB9D994B4A97C19);    if(empty($R7D0596C36891967F3BB9D994B4A97C19) && $R53E0870B983E4C20823CCFFAD959F33C)$R7D0596C36891967F3BB9D994B4A97C19 = "NULL";    return $R7D0596C36891967F3BB9D994B4A97C19;   }     public static function call_remote_server($R461B3CF352C49384D8EFBFA869A4BA9A, $RC2D2567438B1F39DD71F78195B5F3DED)   {      if(!function_exists('curl_exec'))return Tools::displayError('cURL is not available');      $R83A253518CA7E08752DBE5B5D61FAA78 = curl_init($R461B3CF352C49384D8EFBFA869A4BA9A);    if (!$R83A253518CA7E08752DBE5B5D61FAA78)return Tools::displayError('can not open Demo Manager Server via cURL');      curl_setopt($R83A253518CA7E08752DBE5B5D61FAA78, CURLOPT_POST, true);    curl_setopt($R83A253518CA7E08752DBE5B5D61FAA78, CURLOPT_POSTFIELDS, $RC2D2567438B1F39DD71F78195B5F3DED);    curl_setopt($R83A253518CA7E08752DBE5B5D61FAA78, CURLOPT_RETURNTRANSFER, true);    curl_setopt($R83A253518CA7E08752DBE5B5D61FAA78, CURLOPT_HEADER, false);    curl_setopt($R83A253518CA7E08752DBE5B5D61FAA78, CURLOPT_TIMEOUT, 30);    curl_setopt($R83A253518CA7E08752DBE5B5D61FAA78, CURLOPT_SSL_VERIFYPEER, false);    curl_setopt($R83A253518CA7E08752DBE5B5D61FAA78, CURLOPT_SSLVERSION, defined('CURL_SSLVERSION_TLSv1_2') ? CURL_SSLVERSION_TLSv1_2 : 6);        $R679E9B9234E2062F809DBD3325D37FB6 = curl_exec($R83A253518CA7E08752DBE5B5D61FAA78);    curl_close($R83A253518CA7E08752DBE5B5D61FAA78);        return $R679E9B9234E2062F809DBD3325D37FB6;   }      public static function ValidateRecapcha()   {    $R7D56178CBE83EF34E8E05A572DFD3776=Tools::getValue('g-recaptcha-response');    if(!$R7D56178CBE83EF34E8E05A572DFD3776){     return false;    }    $R239A181C8C4F3EA07DAA83869F5F006F = "https://www.google.com/recaptcha/api/siteverify?secret=" . Configuration::get('AK_GRC_SECRET_KEY') . "&response=".$R7D56178CBE83EF34E8E05A572DFD3776."&remoteip=".$_SERVER['REMOTE_ADDR'];        $R04DC9A31C8FE0CD27C4C4A1066AEFCD5 = json_decode(file_get_contents($R239A181C8C4F3EA07DAA83869F5F006F), true);    return $R04DC9A31C8FE0CD27C4C4A1066AEFCD5['success'];   }      public static function RmdirRecursive($R714CA9EB87223AD2D6815F90173FDE78) {    $RA279E72759B585B5FE9D78B5CF755E16 = array_diff(scandir($R714CA9EB87223AD2D6815F90173FDE78), array('.','..'));    foreach ($RA279E72759B585B5FE9D78B5CF755E16 as $R09A33463761E506248078D422B1C5226) {     (is_dir("$R714CA9EB87223AD2D6815F90173FDE78/$R09A33463761E506248078D422B1C5226")) ? AgileHelper::RmdirRecursive("$R714CA9EB87223AD2D6815F90173FDE78/$R09A33463761E506248078D422B1C5226") : unlink("$R714CA9EB87223AD2D6815F90173FDE78/$R09A33463761E506248078D422B1C5226");    }    return rmdir($R714CA9EB87223AD2D6815F90173FDE78);   }      public static function EscapePackJS($REEC94DE49995C9B81708CD2C2A293E0A)   {    $REEC94DE49995C9B81708CD2C2A293E0A = str_replace("'","\\'",$REEC94DE49995C9B81708CD2C2A293E0A);   $R8C2578958C407E0D2623B3F10C9A860A  = array("\r\n", "\n", "\r");    $REEC94DE49995C9B81708CD2C2A293E0A = str_replace($R8C2578958C407E0D2623B3F10C9A860A, '', $REEC94DE49995C9B81708CD2C2A293E0A);    return $REEC94DE49995C9B81708CD2C2A293E0A;   }      public static function array_insert(&$R5E74CE6461E75BAAAF20290224125798, $R77C8490111804806B95737FAD028B940, $R0AB787605ED5ED160FCBD1F3E9B8BDB7) {   settype($R5E74CE6461E75BAAAF20290224125798, "array");   settype($R77C8490111804806B95737FAD028B940, "array");   settype($R0AB787605ED5ED160FCBD1F3E9B8BDB7, "int");      if($R0AB787605ED5ED160FCBD1F3E9B8BDB7==0) {    $R5E74CE6461E75BAAAF20290224125798 = array_merge($R77C8490111804806B95737FAD028B940, $R5E74CE6461E75BAAAF20290224125798);   } else {            if($R0AB787605ED5ED160FCBD1F3E9B8BDB7 >= (count($R5E74CE6461E75BAAAF20290224125798)-1)) {     $R5E74CE6461E75BAAAF20290224125798 = array_merge($R5E74CE6461E75BAAAF20290224125798, $R77C8490111804806B95737FAD028B940);    } else {          $R327E85DB95BE7ED252A04BDA579689CD = array_slice($R5E74CE6461E75BAAAF20290224125798, 0, $R0AB787605ED5ED160FCBD1F3E9B8BDB7);     $RA19922356D8DF2FFEB662D29C897AFFD = array_slice($R5E74CE6461E75BAAAF20290224125798, $R0AB787605ED5ED160FCBD1F3E9B8BDB7);     $R5E74CE6461E75BAAAF20290224125798 = array_merge($R327E85DB95BE7ED252A04BDA579689CD, $R77C8490111804806B95737FAD028B940, $RA19922356D8DF2FFEB662D29C897AFFD);    }   }  }     public static function get_order_id_from_maildata($RBDB2AD8B968947A80C82ED09BD702976)   {    $R832967B2FCA9F9B27DB2AE0F4275A08E = $RBDB2AD8B968947A80C82ED09BD702976['{order_name}'];    $R5B92E56774920499F4ADDD0EC782C83E=0;          $RC6D5A210185FDF646ECA092655E23B9B = explode("#",$R832967B2FCA9F9B27DB2AE0F4275A08E);    if(count($RC6D5A210185FDF646ECA092655E23B9B) > 1)    {     $R832967B2FCA9F9B27DB2AE0F4275A08E = $RC6D5A210185FDF646ECA092655E23B9B[0];     $R5B92E56774920499F4ADDD0EC782C83E = intval($RC6D5A210185FDF646ECA092655E23B9B[1])  - 1 ;    }    $R459CF7EF386C656B9E43B367B4D98729 = Db::getInstance()->executeS('SELECT id_order FROM ' . _DB_PREFIX_ . 'orders WHERE reference=\'' .$R832967B2FCA9F9B27DB2AE0F4275A08E . '\' ORDER BY id_order');    $RDE6D1531493DFC39BA2B390CA5A01256 = intval($R459CF7EF386C656B9E43B367B4D98729[$R5B92E56774920499F4ADDD0EC782C83E]["id_order"]);    if($RDE6D1531493DFC39BA2B390CA5A01256 <=0)    {     $RDE6D1531493DFC39BA2B390CA5A01256 =  (int)str_replace('#','',$RBDB2AD8B968947A80C82ED09BD702976['{order_name}']);     }        if($RDE6D1531493DFC39BA2B390CA5A01256 <=0)    {     $RDE6D1531493DFC39BA2B390CA5A01256 =  (int)$RBDB2AD8B968947A80C82ED09BD702976['{id_order}'];    }    return $RDE6D1531493DFC39BA2B390CA5A01256;     }       public static function getAllPaymentModules($R368F0365A446C4BDF2D2FCA04DF2B35B)   {    $R78A14F6A4C664223ADA5EED0F3EAE5A9 = array();        $R4D1B20585F5E90178187AC0090AC2F2F = Module::getModulesOnDisk(true);   $R2AFD8880E41427EA156A3785FE238A27 = ModuleManagerBuilder::getInstance();   $R28C9CAF06999D7EFF6AA48FC1DC6F036 = $R2AFD8880E41427EA156A3785FE238A27->buildRepository();    foreach ($R4D1B20585F5E90178187AC0090AC2F2F as $R01787CB5A57D47DC8A648998E4A6512C)    {    $R229B2B228615EBBEC32E9434F9521FB0 = $R28C9CAF06999D7EFF6AA48FC1DC6F036->getModule($R01787CB5A57D47DC8A648998E4A6512C->name);       if ($R229B2B228615EBBEC32E9434F9521FB0->attributes->get('parent_class') != 'PaymentModule') continue;        if (!$R01787CB5A57D47DC8A648998E4A6512C->id) continue;        if (!get_class($R01787CB5A57D47DC8A648998E4A6512C) == 'SimpleXMLElement') {     $R01787CB5A57D47DC8A648998E4A6512C->country = array();    }     $R130D64A4AD653C91E0FD80DE8FEADC3A = new DbQuery();    $R130D64A4AD653C91E0FD80DE8FEADC3A->select('`id_country`');    $R130D64A4AD653C91E0FD80DE8FEADC3A->from('module_country');    $R130D64A4AD653C91E0FD80DE8FEADC3A->where('`id_module` = '.(int)$R01787CB5A57D47DC8A648998E4A6512C->id);    $R130D64A4AD653C91E0FD80DE8FEADC3A->where('`id_shop` = '.(int)$R368F0365A446C4BDF2D2FCA04DF2B35B);    $RA40B937F978E4FBE2FE56D24981F0CD5 = Db::getInstance()->executeS($R130D64A4AD653C91E0FD80DE8FEADC3A);    foreach ($RA40B937F978E4FBE2FE56D24981F0CD5 as $RD5D8F70E90FCD7F6429DEDAE71E78CE7) {     $R01787CB5A57D47DC8A648998E4A6512C->country[] = $RD5D8F70E90FCD7F6429DEDAE71E78CE7['id_country'];    }     if (!get_class($R01787CB5A57D47DC8A648998E4A6512C) == 'SimpleXMLElement') {     $R01787CB5A57D47DC8A648998E4A6512C->currency = array();    }     $R130D64A4AD653C91E0FD80DE8FEADC3A = new DbQuery();    $R130D64A4AD653C91E0FD80DE8FEADC3A->select('`id_currency`');    $R130D64A4AD653C91E0FD80DE8FEADC3A->from('module_currency');    $R130D64A4AD653C91E0FD80DE8FEADC3A->where('`id_module` = '.(int)$R01787CB5A57D47DC8A648998E4A6512C->id);    $R130D64A4AD653C91E0FD80DE8FEADC3A->where('`id_shop` = '.(int)$R368F0365A446C4BDF2D2FCA04DF2B35B);    $RC91C47F484460FFE82CE832D44A8DA99 = Db::getInstance()->executeS($R130D64A4AD653C91E0FD80DE8FEADC3A);    foreach ($RC91C47F484460FFE82CE832D44A8DA99 as $currency) {     $R01787CB5A57D47DC8A648998E4A6512C->currency[] = $currency['id_currency'];    }     if (!get_class($R01787CB5A57D47DC8A648998E4A6512C) == 'SimpleXMLElement') {     $R01787CB5A57D47DC8A648998E4A6512C->group = array();    }     $R130D64A4AD653C91E0FD80DE8FEADC3A = new DbQuery();    $R130D64A4AD653C91E0FD80DE8FEADC3A->select('`id_group`');    $R130D64A4AD653C91E0FD80DE8FEADC3A->from('module_group');    $R130D64A4AD653C91E0FD80DE8FEADC3A->where('`id_module` = '.(int)$R01787CB5A57D47DC8A648998E4A6512C->id);    $R130D64A4AD653C91E0FD80DE8FEADC3A->where('`id_shop` = '.(int)$R368F0365A446C4BDF2D2FCA04DF2B35B);    $RB67F4F4FC0A88900A925BA14A75BBE2B = Db::getInstance()->executeS($R130D64A4AD653C91E0FD80DE8FEADC3A);    foreach ($RB67F4F4FC0A88900A925BA14A75BBE2B as $R87AEE2288494E53FB8611A590D3512AC) {     $R01787CB5A57D47DC8A648998E4A6512C->group[] = $R87AEE2288494E53FB8611A590D3512AC['id_group'];    }     if (!get_class($R01787CB5A57D47DC8A648998E4A6512C) == 'SimpleXMLElement') {     $R01787CB5A57D47DC8A648998E4A6512C->reference = array();    }    $R130D64A4AD653C91E0FD80DE8FEADC3A = new DbQuery();    $R130D64A4AD653C91E0FD80DE8FEADC3A->select('`id_reference`');    $R130D64A4AD653C91E0FD80DE8FEADC3A->from('module_carrier');    $R130D64A4AD653C91E0FD80DE8FEADC3A->where('`id_module` = '.(int)$R01787CB5A57D47DC8A648998E4A6512C->id);    $R130D64A4AD653C91E0FD80DE8FEADC3A->where('`id_shop` = '.(int)$R368F0365A446C4BDF2D2FCA04DF2B35B);    $RE1B2B3167E624F30E44FB480AE7FA500 = Db::getInstance()->executeS($R130D64A4AD653C91E0FD80DE8FEADC3A);    foreach ($RE1B2B3167E624F30E44FB480AE7FA500 as $R53CED8F460F10F938CCEC04FE634E4D3) {     $R01787CB5A57D47DC8A648998E4A6512C->reference[] = $R53CED8F460F10F938CCEC04FE634E4D3['id_reference'];    }     $R78A14F6A4C664223ADA5EED0F3EAE5A9[] = $R01787CB5A57D47DC8A648998E4A6512C;   }   return $R78A14F6A4C664223ADA5EED0F3EAE5A9;  }   }  