// elFinder, Version: 2.0 rc2, combined 13 Jul 2014 

elFinder.prototype.command=function(e){this.fm=e,this.name="",this.title="",this.state=-1,this.alwaysEnabled=!1,this._disabled=!1,this.disableOnSearch=!1,this.updateOnSelect=!0,this._handlers={enable:function(){this.update(void 0,this.value)},disable:function(){this.update(-1,this.value)},"open reload load":function(){this._disabled=!(this.alwaysEnabled||this.fm.isCommandEnabled(this.name)),this.update(void 0,this.value),this.change()}},this.handlers={},this.shortcuts=[],this.options={ui:"button"},this.setup=function(e,t){var i,n,a=this,r=this.fm;for(this.name=e,this.title=r.messages["cmd"+e]?r.i18n("cmd"+e):e,this.options=$.extend({},this.options,t),this.listeners=[],this.updateOnSelect&&(this._handlers.select=function(){this.update(void 0,this.value)}),$.each($.extend({},a._handlers,a.handlers),function(e,t){r.bind(e,$.proxy(t,a))}),i=0;i<this.shortcuts.length;i++)n=this.shortcuts[i],n.callback=$.proxy(n.callback||function(){this.exec()},this),!n.description&&(n.description=this.title),r.shortcut(n);this.disableOnSearch&&r.bind("search searchend",function(e){a._disabled="search"==e.type,a.update(void 0,a.value)}),this.init()},this.init=function(){},this.exec=function(){return $.Deferred().reject()},this.disabled=function(){return this.state<0},this.enabled=function(){return this.state>-1},this.active=function(){return this.state>0},this.getstate=function(){return-1},this.update=function(e,t){var i=this.state,n=this.value;this.state=this._disabled?-1:void 0!==e?e:this.getstate(),this.value=t,(i!=this.state||n!=this.value)&&this.change()},this.change=function(e){var t,i;if("function"==typeof e)this.listeners.push(e);else for(i=0;i<this.listeners.length;i++){t=this.listeners[i];try{t(this.state,this.value)}catch(n){this.fm.debug("error",n)}}return this},this.hashes=function(t){return t?$.map($.isArray(t)?t:[t],function(t){return e.file(t)?t:null}):e.selected()},this.files=function(e){var t=this.fm;return e?$.map($.isArray(e)?e:[e],function(e){return t.file(e)||null}):t.selectedFiles()}},elFinder.prototype.history=function(e){var t,i=this,n=!0,a=[],r=function(){a=[e.cwd().hash],t=0,n=!0},s=(e.options.useBrowserHistory&&window.history&&window.history.pushState?window.history:null,function(s){return s&&i.canForward()||!s&&i.canBack()?(n=!1,e.exec("open",a[s?++t:--t]).fail(r)):$.Deferred().reject()});this.canBack=function(){return t>0},this.canForward=function(){return t<a.length-1},this.back=s,this.forward=function(){return s(!0)},e.open(function(){var i=a.length,r=e.cwd().hash;n&&(t>=0&&i>t+1&&a.splice(t+1),a[a.length-1]!=r&&a.push(r),t=a.length-1),n=!0}).reload(r)},elFinder.prototype._options={url:"",requestType:"get",transport:{},urlUpload:"",dragUploadAllow:"auto",iframeTimeout:0,customData:{},handlers:{},lang:"en",cssClass:"",commands:["open","reload","home","up","back","forward","getfile","quicklook","download","rm","duplicate","rename","mkdir","mkfile","upload","copy","cut","paste","edit","extract","archive","search","info","view","help","resize","sort","netmount"],commandsOptions:{getfile:{onlyURL:!1,multiple:!1,folders:!1,oncomplete:""},upload:{ui:"uploadbutton"},quicklook:{autoplay:!0,jplayer:"extensions/jplayer"},edit:{mimes:[],editors:[]},info:{nullUrlDirLinkSelf:!0},help:{view:["about","shortcuts","help"]}},getFileCallback:null,defaultView:"icons",ui:["toolbar","tree","path","stat"],uiOptions:{toolbar:[["back","forward"],["netmount"],["mkdir","mkfile","upload"],["open","download","getfile"],["info"],["quicklook"],["copy","cut","paste"],["rm"],["duplicate","rename","edit","resize"],["extract","archive"],["search"],["view","sort"],["help"]],tree:{openRootOnLoad:!0,syncTree:!0},navbar:{minWidth:150,maxWidth:500},cwd:{oldSchool:!1}},onlyMimes:[],sortRules:{},sortType:"name",sortOrder:"asc",sortStickFolders:!0,clientFormatDate:!0,UTCDate:!1,dateFormat:"",fancyDateFormat:"",width:"auto",height:400,resizable:!0,notifyDelay:500,allowShortcuts:!0,rememberLastDir:!0,useBrowserHistory:!0,showFiles:30,showThreshold:50,validName:!1,sync:0,loadTmbs:5,cookie:{expires:30,domain:"",path:"/",secure:!1},contextmenu:{navbar:["open","|","copy","cut","paste","duplicate","|","rm","|","info"],cwd:["reload","back","|","upload","mkdir","mkfile","paste","|","sort","|","info"],files:["getfile","|","open","quicklook","|","download","|","copy","cut","paste","duplicate","|","rm","|","edit","rename","resize","|","archive","extract","|","info"]},debug:["error","warning","event-destroy"]},elFinder.prototype.resources={"class":{hover:"ui-state-hover",active:"ui-state-active",disabled:"ui-state-disabled",draggable:"ui-draggable",droppable:"ui-droppable",adroppable:"elfinder-droppable-active",cwdfile:"elfinder-cwd-file",cwd:"elfinder-cwd",tree:"elfinder-tree",treeroot:"elfinder-navbar-root",navdir:"elfinder-navbar-dir",navdirwrap:"elfinder-navbar-dir-wrapper",navarrow:"elfinder-navbar-arrow",navsubtree:"elfinder-navbar-subtree",navcollapse:"elfinder-navbar-collapsed",navexpand:"elfinder-navbar-expanded",treedir:"elfinder-tree-dir",placedir:"elfinder-place-dir",searchbtn:"elfinder-button-search"},tpl:{perms:'<span class="elfinder-perms"/>',symlink:'<span class="elfinder-symlink"/>',navicon:'<span class="elfinder-nav-icon"/>',navspinner:'<span class="elfinder-navbar-spinner"/>',navdir:'<div class="elfinder-navbar-wrapper"><span id="{id}" class="ui-corner-all elfinder-navbar-dir {cssclass}"><span class="elfinder-navbar-arrow"/><span class="elfinder-navbar-icon"/>{symlink}{permissions}{name}</span><div class="elfinder-navbar-subtree"/></div>'},mimes:{text:["application/x-empty","application/javascript","application/xhtml+xml","audio/x-mp3-playlist","application/x-web-config","application/docbook+xml","application/x-php","application/x-perl","application/x-awk","application/x-config","application/x-csh","application/xml"]},mixin:{make:function(){var e=this.fm,t=this.name,i=e.getUI("cwd"),n=$.Deferred().fail(function(t){i.trigger("unselectall"),t&&e.error(t)}).always(function(){d.remove(),l.remove(),e.enable()}),a="tmp_"+parseInt(1e5*Math.random()),r=e.cwd().hash,s=new Date,o={hash:a,name:e.uniqueName(this.prefix),mime:this.mime,read:!0,write:!0,date:"Today "+s.getHours()+":"+s.getMinutes()},l=i.trigger("create."+e.namespace,o).find("#"+a),d=$('<input type="text"/>').keydown(function(e){e.stopImmediatePropagation(),e.keyCode==$.ui.keyCode.ESCAPE?n.reject():e.keyCode==$.ui.keyCode.ENTER&&d.blur()}).mousedown(function(e){e.stopPropagation()}).blur(function(){var i=$.trim(d.val()),s=d.parent();if(s.length){if(!i)return n.reject("errInvName");if(e.fileByName(i,r))return n.reject(["errExists",i]);s.html(e.escape(i)),e.lockfiles({files:[a]}),e.request({data:{cmd:t,name:i,target:r},notify:{type:t,cnt:1},preventFail:!0,syncOnFail:!0}).fail(function(e){n.reject(e)}).done(function(e){n.resolve(e)})}});return this.disabled()||!l.length?n.reject():(e.disable(),l.find(".elfinder-cwd-filename").empty("").append(d.val(o.name)),d.select().focus(),d[0].setSelectionRange&&d[0].setSelectionRange(0,o.name.replace(/\..+$/,"").length),n)}}},elFinder.prototype.version="2.0.2",$.fn.dialogelfinder=function(e){var t="elfinderPosition",i="elfinderDestroyOnClose";if(this.not(".elfinder").each(function(){{var n=($(document),$('<div class="ui-widget-header dialogelfinder-drag ui-corner-top">'+(e.title||"Files")+"</div>")),a=($('<a href="#" class="dialogelfinder-drag-close ui-corner-all"><span class="ui-icon ui-icon-closethick"/></a>').appendTo(n).click(function(e){e.preventDefault(),a.dialogelfinder("close")}),$(this).addClass("dialogelfinder").css("position","absolute").hide().appendTo("body").draggable({handle:".dialogelfinder-drag",containment:"window"}).elfinder(e).prepend(n));a.elfinder("instance")}a.width(parseInt(a.width())||840).data(i,!!e.destroyOnClose).find(".elfinder-toolbar").removeClass("ui-corner-top"),e.position&&a.data(t,e.position),e.autoOpen!==!1&&$(this).dialogelfinder("open")}),"open"==e){var n=$(this),a=n.data(t)||{top:parseInt($(document).scrollTop()+($(window).height()<n.height()?2:($(window).height()-n.height())/2)),left:parseInt($(document).scrollLeft()+($(window).width()<n.width()?2:($(window).width()-n.width())/2))},r=100;n.is(":hidden")&&($("body").find(":visible").each(function(){var e,t=$(this);this!==n[0]&&"absolute"==t.css("position")&&(e=parseInt(t.zIndex()))>r&&(r=e+1)}),n.zIndex(r).css(a).show().trigger("resize"),setTimeout(function(){n.trigger("resize").mousedown()},200))}else if("close"==e){var n=$(this);n.is(":visible")&&(n.data(i)?n.elfinder("destroy").remove():n.elfinder("close"))}else if("instance"==e)return $(this).getElFinder();return this};