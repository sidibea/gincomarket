<?php /*
///-build_id: 2015031920.2559
/// This source file is subject to the Software License Agreement that is bundled with this 
/// package in the file license.txt, or you can get it here
/// http://addons-modules.com/store/en/content/3-terms-and-conditions-of-use
///
/// @copyright  2009-2012 Addons-Modules.com
///
*/
${"\x47\x4cO\x42\x41LS"}["w\x6b\x6f\x76\x6e\x67c\x66\x6b"]="r\x65\x63";${"\x47L\x4f\x42\x41\x4cS"}["y\x72er\x70pqb\x66\x69"]="\x73\x71\x6c";${"GL\x4fBA\x4c\x53"}["\x6d\x68\x6a\x73\x66\x66\x6a\x71"]="p\x72\x6fd\x75c\x74\x69\x64s";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["n\x67\x79\x74\x69\x6d\x79\x6e\x79t"]="\x75r\x6c";${"\x47L\x4f\x42\x41L\x53"}["zqc\x6f\x77\x6c"]="\x69d";${"G\x4c\x4f\x42\x41\x4c\x53"}["\x61l\x63k\x70cf\x70i"]="\x6e\x65\x77to\x65\x6bn";${"G\x4c\x4f\x42\x41\x4c\x53"}["\x6f\x6e\x67\x76hybr"]="c\x75\x72\x72\x65\x6e\x63\x79";include_once(_PS_ADMIN_DIR_."/.\x2e/m\x6fd\x75l\x65s/a\x67\x69\x6ce\x6du\x6c\x74ip\x6ces\x65\x6c\x6c\x65\x72/agile\x6du\x6ct\x69ple\x73el\x6c\x65r.\x70\x68p");class AgileBulkApproval extends ModuleAdminController{private$_isSeller;private$_approved_statuses=array('1'=>'Yes','0'=>'No');public$controller_type='admin';public function __construct(){global$cookie;$this->bootstrap=true;$this->table="\x70rodu\x63\x74";$this->identifier="\x69d_pr\x6fd\x75\x63\x74";$this->className="\x50rodu\x63t";$this->list_no_link=false;parent::__construct();${${"\x47\x4c\x4f\x42A\x4cS"}["\x6f\x6e\x67\x76\x68yb\x72"]}=(int)Configuration::get("P\x53_C\x55R\x52E\x4e\x43\x59\x5f\x44E\x46\x41ULT");$this->addRowAction("");$this->confirmations[]=$this->l('Only products waiting approval will be displayed here, no matter what category the product is in. Products have been approved will not appear here.');$this->bulk_actions["bu\x6ck\x61pr\x6f\x76\x61\x6c"]=array("tex\x74"=>$this->l('Approve'),"\x63\x6fn\x66i\x72\x6d"=>$this->l('Approve all selected items?'));$this->_isSeller=(intval($cookie->profile)==Configuration::get("AGI\x4cE\x5fM\x53_PR\x4f\x46IL\x45_I\x44"));$this->_join=$this->_join." L\x45F\x54 JO\x49\x4e\x20`"._DB_PREFIX_."p\x72o\x64uct\x5fl\x61n\x67`\x20b O\x4e (\x61\x2e\x60\x69d_produ\x63t\x60 \x3d\x20b\x2e\x60\x69d_p\x72o\x64\x75\x63\x74\x60 \x41\x4eD b\x2eid_\x6cang=".$cookie->id_lang.")"."\t\x4c\x45F\x54 J\x4fIN\x20\x60"._DB_PREFIX_."pro\x64\x75\x63\x74\x5fo\x77\x6eer\x60\x20\x70\x6f\x20\x4f\x4e\x20(a\x2e\x60\x69\x64\x5f\x70rod\x75ct\x60=\x70o\x2e\x60\x69\x64_p\x72o\x64uct`)"."\x20\x4cEF\x54\x20\x4aOI\x4e `"._DB_PREFIX_."s\x65\x6c\x6cer\x69\x6e\x66o`\x20\x73\x20ON (po.`\x69d\x5fo\x77n\x65\x72`\x20\x3d s\x2e\x60\x69\x64_\x73\x65ll\x65r\x60)"."\x20\x4c\x45FT \x4a\x4f\x49\x4e\x20`"._DB_PREFIX_."s\x65\x6c\x6c\x65\x72\x69\x6e\x66o\x5f\x6c\x61ng`\x20sl\x20\x4fN (sl.\x60\x69\x64\x5fs\x65l\x6ce\x72in\x66o\x60\x20\x3d \x73.\x60i\x64_\x73el\x6c\x65\x72\x69nf\x6f`\x41ND s\x6c\x2e\x69\x64\x5f\x6c\x61\x6e\x67=".$cookie->id_lang.")"." \x4c\x45FT \x4a\x4f\x49\x4e \x60"._DB_PREFIX_."\x69m\x61\x67\x65\x60\x20i O\x4e (\x69\x2e`\x69\x64_\x70rodu\x63t\x60 \x3d \x61.`id\x5fpr\x6fd\x75ct\x60\x20\x41ND\x20i\x2e`cov\x65r\x60 \x3d\x20\x31) "." L\x45FT \x4aOI\x4e\x20`"._DB_PREFIX_."\x63\x61\x74\x65\x67\x6fry_p\x72o\x64u\x63\x74\x60\x20cp ON\x20(c\x70.\x60i\x64\x5fproduct\x60 \x3d \x61\x2e`i\x64\x5fp\x72odu\x63t\x60 AN\x44 cp\x2e\x69\x64_\x63ate\x67ory\x3d\x61.\x69d\x5f\x63\x61t\x65\x67\x6f\x72\x79_\x64e\x66a\x75\x6c\x74)\x20"."\x20L\x45FT\x20\x4aO\x49\x4e `"._DB_PREFIX_."\x74\x61x\x5f\x72ul\x65\x60 \x74r O\x4e (a.`\x69d_\x74ax\x5f\x72\x75les\x5f\x67rou\x70\x60\x20= \x74r.\x60id_\x74ax_rule\x73_gr\x6f\x75p\x60 \x41ND tr.\x60id\x5f\x63oun\x74\x72\x79`\x20= ".(_PS_VERSION_>="1.\x35"?Context::getContext()->country->id:(int)Country::getDefaultCountryId())." AND\x20\x74r\x2e`\x69d\x5f\x73\x74at\x65\x60\x20\x3d\x20\x30)"."\x20\x4cEFT \x4a\x4fI\x4e\x20`"._DB_PREFIX_."tax\x60 \x74 \x4f\x4e (t\x2e`i\x64_tax\x60 = \x74r\x2e\x60id_t\x61\x78\x60)";$this->_select=$this->_select."b\x2e\x6eam\x65, c\x70\x2e\x60\x70\x6f\x73\x69t\x69o\x6e`,s\x6c.com\x70\x61\x6ey\x20\x41\x53\x20\x6f\x77ne\x72,\x20IFNU\x4c\x4c(p\x6f.ap\x70r\x6fv\x65\x64,\x30)\x20\x41S\x20ap\x70r\x6f\x76\x65d,\x20i\x2e`id\x5fi\x6da\x67e`,\x20(\x61.\x60pr\x69\x63\x65\x60\x20*\x20((\x31\x300\x20+ (\x49F\x4eULL(t.\x72\x61t\x65,0)))/\x3100)) A\x53\x20pr\x69\x63e\x5f\x66in\x61\x6c\n\t\t\t,".${${"\x47LO\x42AL\x53"}["\x6f\x6eg\x76\x68\x79\x62\x72"]}." \x61s id\x5fcur\x72\x65n\x63\x79\n\t\t\t,\x43ASE\x20W\x48E\x4e\x20\x49\x46\x4e\x55\x4cL(p\x6f.a\x70\x70r\x6f\x76\x65\x64,\x30)=\x31 TH\x45\x4e\x20'".$this->_approved_statuses[1]."\x27\x20\x45\x4c\x53E '".$this->_approved_statuses[0]."'\x20END\x20\x41S a\x70p\x72o\x76\x65\x64\x5fte\x78t\n \x20   \x20 \x20\x20   ";$this->_where=$this->_where."\x20A\x4e\x44 \x49FNU\x4cL(po\x2eap\x70ro\x76\x65d,\x30)\x3d\x30";$this->fields_list=array("i\x64_pr\x6f\x64uct"=>array("\x74\x69t\x6c\x65"=>$this->l('ID'),"a\x6ci\x67\x6e"=>"ce\x6eter","w\x69\x64\x74h"=>20),"\x69ma\x67e"=>array("titl\x65"=>$this->l('Photo'),"ali\x67n"=>"\x63ente\x72","im\x61g\x65"=>"p","\x77i\x64t\x68"=>45,"o\x72\x64e\x72\x62y"=>false,"\x66il\x74er"=>false,"s\x65\x61\x72\x63\x68"=>false),"n\x61m\x65"=>array("ti\x74l\x65"=>$this->l('Name'),"w\x69dth"=>220,"fil\x74er\x5fk\x65\x79"=>"\x62\x21\x6e\x61\x6de"),"\x70\x72\x69ce"=>array("\x74it\x6ce"=>$this->l('Base price'),"\x77id\x74h"=>70,"t\x79\x70e"=>"p\x72i\x63e","\x63\x75\x72\x72\x65nc\x79"=>true,"a\x6ci\x67\x6e"=>"\x72ight","fi\x6ct\x65\x72\x5f\x6bey"=>"a!p\x72i\x63\x65"),"\x70\x72\x69c\x65\x5f\x66inal"=>array("title"=>$this->l('Final price'),"\x77\x69dth"=>70,"\x74ype"=>"\x70r\x69\x63\x65","\x63u\x72ren\x63y"=>true,"al\x69\x67\x6e"=>"\x72ig\x68\x74","h\x61vi\x6egF\x69l\x74er"=>true,"\x6f\x72der\x62y"=>false),"\x61pp\x72oved_\x74\x65\x78t"=>array("ti\x74\x6c\x65"=>$this->l('Approved'),"\x77\x69dt\x68"=>60,"t\x79p\x65"=>"\x73\x65\x6c\x65\x63\x74","\x6ci\x73\x74"=>$this->_approved_statuses,"\x66i\x6c\x74er\x5f\x74yp\x65"=>"\x69n\x74","filt\x65r\x5f\x6bey"=>"po!\x61\x70\x70\x72\x6fve\x64"),"\x6fw\x6e\x65r"=>array("t\x69t\x6c\x65"=>$this->l('Owner'),"wi\x64\x74\x68"=>90,"\x66ilt\x65r\x5f\x6b\x65\x79"=>"\x6fw\x6eer"));}public function initToolbar(){parent::initToolbar();unset($this->toolbar_btn["ne\x77"]);}public function init(){global$cookie;if(isset($_GET["u\x70\x64\x61te".$this->table])AND isset($_GET[$this->identifier])AND(int)$_GET[$this->identifier]>0){$sceeyw="\x69\x64";$uhniwwg="\x6e\x65\x77t\x6f\x65\x6bn";${$sceeyw}=Tools::getValue($this->identifier);$dnpivptxp="u\x72l";${${"\x47\x4c\x4f\x42\x41LS"}["\x61\x6cc\x6b\x70c\x66\x70i"]}=Tools::getAdminTokenLite("Admin\x50rod\x75\x63\x74s");${$dnpivptxp}="./\x69\x6edex.php?\x63\x6f\x6e\x74\x72\x6f\x6c\x6ce\x72\x3da\x64\x6d\x69npr\x6f\x64\x75c\x74\x73&".$this->identifier."\x3d".${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["zq\x63\x6f\x77\x6c"]}."\x26u\x70\x64\x61t\x65".$this->table."\x26\x74ok\x65\x6e=".${$uhniwwg};Tools::redirectAdmin(${${"\x47LOBA\x4cS"}["n\x67\x79\x74i\x6d\x79n\x79\x74"]});}parent::init();}public function postProcess(){if(Tools::isSubmit("\x73ub\x6di\x74\x42\x75\x6ckbulkap\x72\x6fva\x6cp\x72od\x75\x63\x74")){if(isset($_POST[$this->table."B\x6fx"])){$qgpxumkun="p\x72\x6f\x64\x75c\x74\x69\x64\x73";$gacdrxw="\x69\x64";${$qgpxumkun}=$_POST[$this->table."Box"];foreach(${${"\x47\x4cOBAL\x53"}["\x6dhj\x73\x66\x66j\x71"]} AS${$gacdrxw}){${"\x47\x4c\x4f\x42\x41\x4c\x53"}["ye\x75\x77\x65m"]="\x69\x64";$xktdphwcv="s\x71\x6c";$qhfvlkp="s\x71\x6c";if(intval(${${"GL\x4fB\x41\x4c\x53"}["\x79\x65u\x77\x65\x6d"]})<=0)continue;$oriqudkuocp="\x73\x71\x6c";${"G\x4cO\x42\x41LS"}["bbrd\x66\x74u"]="\x69\x64";${${"GLO\x42\x41L\x53"}["\x79r\x65\x72p\x70\x71\x62\x66i"]}="SE\x4cE\x43\x54 * FRO\x4d "._DB_PREFIX_."produ\x63\x74_own\x65r\x20WHERE \x69\x64_\x70\x72o\x64u\x63\x74\x20\x3d".${${"\x47\x4c\x4fB\x41\x4c\x53"}["\x7a\x71\x63o\x77\x6c"]};${${"\x47\x4cO\x42\x41\x4c\x53"}["wk\x6fv\x6eg\x63f\x6b"]}=Db::getInstance()->getRow(${${"\x47\x4c\x4fBA\x4c\x53"}["y\x72\x65\x72p\x70q\x62\x66\x69"]});if(!isset(${${"GL\x4f\x42\x41\x4c\x53"}["\x77k\x6f\x76n\x67\x63\x66k"]}["id_pr\x6f\x64uc\x74"]))${$xktdphwcv}="\x49\x4e\x53ERT\x20\x49\x4eTO\x20"._DB_PREFIX_."pr\x6fd\x75\x63t\x5fo\x77ner (i\x64\x5f\x70ro\x64u\x63t,\x69\x64\x5f\x6f\x77\x6ee\x72,\x61\x70pro\x76\x65\x64,date_ad\x64) V\x41\x4cU\x45S\x20(".${${"G\x4c\x4f\x42A\x4c\x53"}["b\x62r\x64\x66t\x75"]}.",0,\x31,'".date("\x59-\x6d-d\x20H:i:s")."\x27)";else${$qhfvlkp}="\x55\x50DA\x54\x45\x20"._DB_PREFIX_."\x70rod\x75\x63\x74\x5fown\x65\x72 SE\x54 \x61ppro\x76\x65d\x3d\x31 \x57\x48ER\x45\x20i\x64\x5f\x70\x72o\x64\x75\x63t=".(int)${${"G\x4cOB\x41L\x53"}["z\x71\x63\x6f\x77\x6c"]};Db::getInstance()->Execute(${$oriqudkuocp});}}else{$this->_errors[]="\x4eo \x70\x72o\x64uct\x20\x77\x61\x73 \x73ele\x63t\x65\x64 \x74o appro\x76\x65.";}return;}parent::postProcess();}}
?>