<?php
$GLOBALS["wYXzoSkVnftdlBTimzbE"]=base64_decode("L3ZpZXdzL2ltZy9tb2JpX2Fzc2V0cy9tdWx0aWxhbmd1YWdlL2VuLnhtbA==");$GLOBALS["UCSLADhJpjsWOsKlUBcb"]=base64_decode("ZW4=");$GLOBALS["cdZFfLVixVCrXUbBIBKb"]=base64_decode("bGFuZ19zZWxlY3Rk");$GLOBALS["dVuXlSzOGKGyKDnveZoM"]=base64_decode("bW1fdGV4dA==");$GLOBALS["ohgmeILpvjDBAlZgeUGZ"]=base64_decode("bW9iaWNvbW1lcmNlX211bHRpbGFuZ3VhZ2U=");$GLOBALS["giMzXvZbNRGZuWPNeHvh"]=base64_decode("MS4w");$GLOBALS["mFIvZUDszocHANGLPQeO"]=base64_decode("L21lZGlhL21vYmlfY29tbWVyY2UvbXVsdGlsYW5ndWFnZS8=");$GLOBALS["DuBdPXLoBKQELhpcKmMV"]=base64_decode("LnhtbA==");$GLOBALS["vuvpyhhRHXRMeNJBFFqX"]=base64_decode("L3ZpZXdzL2ltZy9tb2JpX2Fzc2V0cy9tdWx0aWxhbmd1YWdlLw==");$GLOBALS["HuFFdeKjgfiyyrNZpxTs"]=base64_decode("bGFuZ3VhZ2VfZGF0YQ==");$GLOBALS["FxCXahpINnUXAkLivYRo"]=base64_decode("cG9zdFByb2Nlc3NMYWJlbHM=");$GLOBALS["FAovzbEBbwewmxTqSDg"]=base64_decode("dXBkYXRlTGFiZWxz");$GLOBALS["NPTdNqtFVGbqEzBydQjo"]=base64_decode("dmlld3MvdGVtcGxhdGVzL2FkbWluL2xhYmVsc2FuZG1lc3NhZ2VzLnRwbA==");$GLOBALS["FLIovxVepvrPFelUHGgg"]=base64_decode("LnBocA==");$GLOBALS["QtEUsTJtpbbqkrdVleSM"]=base64_decode("bGFuZ3VhZ2Vz");$GLOBALS["QFrcMJsmnLnbZBCFkRTa"]=base64_decode("bG9jYWxl");$GLOBALS["JxnebyjdFidXdVzNqnEb"]=base64_decode("Lw==");$GLOBALS["jttovGIxufmUTDayIipO"]=base64_decode("bW9kdWxlcGF0aA==");$GLOBALS["KdqeKagYASBmzizzuwoJ"]=base64_decode("bW9kdWxlZGly");$GLOBALS["qszUBlZrodCwfDzrhHSn"]=base64_decode("bW9kdWxlbmFtZQ==");$GLOBALS["NkxBHdCMcdUrPrqYyhej"]=base64_decode("c2VsX21lc190YWI=");$GLOBALS["hzmznwwhMwKForXthpYo"]=base64_decode("c2VsX2xhYl90YWI=");$GLOBALS["pbMjIRDxZSyQqSpvOaYu"]=base64_decode("c2VsX3RhYg==");$GLOBALS["yMjRNboFZoyxpuVjlssf"]=base64_decode("bGFiZWxz");$GLOBALS["siOBkNuGhovGPzJs"]=base64_decode("aXNvX2NvZGU=");$GLOBALS["rgIkImLrAaQHjdciiuxP"]=base64_decode("bGFuZw==");$GLOBALS["qFkXBotWbNwqnkjBHGEC"]=base64_decode("dGFic19wcmVsb2FkZWQ=");$GLOBALS["waWafEeALmeXuRDBxZD"]=base64_decode("aWRfbGFuZw==");$GLOBALS["aduKGaNDKTXdFqBoTwWo"]=base64_decode("cHJvZHVjdF90YWJz");$GLOBALS["phFkjBOlyjXhsKqDnekc"]=base64_decode("JnVwZGF0ZW1vYmljb21tZXJjZV9hcHBsaWNhdGlvbnMmdG9rZW49");$GLOBALS["RNdMWXwrSiywnuPoHsWw"]=base64_decode("JmlkPQ==");$GLOBALS["mkMtXXjTBDEtCJNZgjZE"]=base64_decode("aHJlZg==");$GLOBALS["BoWuBfavKqJxeLgCuLA"]=base64_decode("bmFtZQ==");$GLOBALS["NwkjqkkbdmBCWZRwKGBz"]=base64_decode("bW9kdWxl");$GLOBALS["dCHkNdBLRbYnoAiDQEGN"]=base64_decode("c2VsZWN0ZWQ=");$GLOBALS["SiRSACHoXsTIZeRmGmwq"]=base64_decode("aWQ=");$GLOBALS["vblFazbKGbBvWSiDXU"]=base64_decode("YWpheFByb2Nlc3M=");$GLOBALS["vgLaMAkTDaWMeLKeoEE"]=base64_decode("YWpheA==");$GLOBALS["kHJjyLiAxgQjfmGLSiWG"]=base64_decode("a2V5X3RhYg==");$GLOBALS["qjyrbaSWTMdPGjFy"]=base64_decode("YWN0aW9u");$GLOBALS["nSJKIbwEaJNgERyWWCPT"]=base64_decode("L3ZpZXdzL2Nzcy9hZG1pbi9tYWluLmNzcw==");$GLOBALS["neUEEMxTZtPsjlITsrHo"]=base64_decode("dmFsaWRhdGU=");$GLOBALS["SHYcIZtEWxJaqnAdAvWw"]=base64_decode("TWVzc2FnZXM=");$GLOBALS["xIbbvssnIKvpaCdziliT"]=base64_decode("bGFiZWxzYW5kbWVzc2FnZXM=");$GLOBALS["psFwMkdFQSZqGJxvZIIk"]=base64_decode("TGFiZWxz");$GLOBALS["njyaJmZboucmVAmNzHMD"]=base64_decode("L01DQWJzdHJhY3QucGhw");$GLOBALS["RSEHzNUuLNnkjknONrET"]=base64_decode("c2VsX3RhYg==");$GLOBALS["YBGuJfsqPEcrNDgMyAqU"]=base64_decode("bGFuZw==");$GLOBALS["EWhsCOMWsXKEpiRkyvzm"]=base64_decode("aWQ=");
?><?php


include_once (dirname ( __FILE__ ) . $GLOBALS["njyaJmZboucmVAmNzHMD"]);
class MCLabelsController extends MCAbstract
{    
    public $bootstrap = true;
    public $module;
    
    
	protected $tab_display;
	protected $tab_display_module;
    protected $current_lang;
    
	protected $available_tabs = array();
	protected $default_tab = 'Labels';
	protected $available_tabs_lang = array();
    
	public function __construct()
	{
        $this->explicitSelect = true;
        $this->context = Context::getContext();
        $this->path = _MODULE_DIR_.$this->module->name;
        
        $this->bootstrap = true;
        $this->lang = false;
        $this->default_form_language = $this->context->language->id;
        
        $this->identifier = $GLOBALS["EWhsCOMWsXKEpiRkyvzm"]; 
        $this->tpl_folder = $GLOBALS["xIbbvssnIKvpaCdziliT"]; 
      
        parent::__construct();
        
        $this->available_tabs_lang = array(
            'Labels'   => $this->l('Labels'),
            $GLOBALS["SHYcIZtEWxJaqnAdAvWw"] => $this->l($GLOBALS["SHYcIZtEWxJaqnAdAvWw"]),
    		);

		$this->available_tabs = array();
		$this->available_tabs = array_merge($this->available_tabs, array(
            'Labels'   => 0,
            'Messages' => 1,
		  ));
	}
    
    public function setMedia()
    {
        parent::setMedia();
            $this->addjQueryPlugin(array(
				$GLOBALS["neUEEMxTZtPsjlITsrHo"],
			));
         $this->addCSS(_PS_MODULE_DIR_.$this->module->name.$GLOBALS["nSJKIbwEaJNgERyWWCPT"]);
    }
    
    public function initProcess()
    {
        if (!isset($_GET[$GLOBALS["qjyrbaSWTMdPGjFy"]]))
			parent::initProcess();
		else
			$this->id_object = (int)Tools::getValue($this->identifier);

		if (isset($this->available_tabs[Tools::getValue($GLOBALS["kHJjyLiAxgQjfmGLSiWG"])]))
			$this->tab_display = Tools::getValue($GLOBALS["kHJjyLiAxgQjfmGLSiWG"]);
        
		if (!$this->tab_display && isset($_GET[$GLOBALS["qjyrbaSWTMdPGjFy"]]))
            if (in_array(Tools::getValue($GLOBALS["qjyrbaSWTMdPGjFy"]), array_keys($this->available_tabs)))
			{
                $this->tab_display = Tools::getValue($GLOBALS["qjyrbaSWTMdPGjFy"]);
            }

		if (!$this->tab_display)
		{
			if (in_array($this->default_tab, $this->available_tabs))
				$this->tab_display = $this->default_tab;
			else
				$this->tab_display = key($this->available_tabs);
		}
    }
    
    public function initContent($token = null)
    {
                $this->fields_form = array();	
		if ($this->ajax)
        {
            if(Tools::getValue($GLOBALS["vgLaMAkTDaWMeLKeoEE"]) == 1)
            {
                $this->content_only = true;
                $this->{$GLOBALS["vblFazbKGbBvWSiDXU"].Tools::getValue($GLOBALS["qjyrbaSWTMdPGjFy"])}();
            }
            
            $this->content_only = true;
        }
		else
		{
			$product_tabs = array();
			foreach ($this->available_tabs as $product_tab => $value)
			{
                $product_tabs[$product_tab] = array(
                    'id'       => $product_tab,
                    'selected' => (Tools::strtolower($product_tab) == Tools::strtolower($this->tab_display) || (isset($this->tab_display_module) && $GLOBALS["NwkjqkkbdmBCWZRwKGBz"].$this->tab_display_module == Tools::strtolower($product_tab))),
                    $GLOBALS["BoWuBfavKqJxeLgCuLA"]     => $this->available_tabs_lang[$product_tab],
                    $GLOBALS["mkMtXXjTBDEtCJNZgjZE"]     => self::$currentIndex.$GLOBALS["RNdMWXwrSiywnuPoHsWw"].(int)Tools::getValue($GLOBALS["SiRSACHoXsTIZeRmGmwq"]).$GLOBALS["phFkjBOlyjXhsKqDnekc"].$this->token,
					);
			}
			$this->tpl_form_vars[$GLOBALS["aduKGaNDKTXdFqBoTwWo"]] = $product_tabs;
            parent::initContent();
		}
    }  
    
    public function renderList()
    {
        $languages = Language::getLanguages();
        $this->current_lang = $languages[0][$GLOBALS["waWafEeALmeXuRDBxZD"]];
        $this->tpl_form_vars[$GLOBALS["qFkXBotWbNwqnkjBHGEC"]] = $this->available_tabs;
        
        if(Tools::getValue($GLOBALS["rgIkImLrAaQHjdciiuxP"])){
            $this->current_lang = Tools::getValue($GLOBALS["rgIkImLrAaQHjdciiuxP"]);
        }

        $langDetails = Language::getLanguage($this->current_lang);
        $locale = $langDetails[$GLOBALS["siOBkNuGhovGPzJs"]];

        $this->setLanguageCodeData($locale);
        $labels = $this->getLanguageData($locale);
        
        $sel_tab = $GLOBALS["yMjRNboFZoyxpuVjlssf"];
        if(Tools::getValue($GLOBALS["pbMjIRDxZSyQqSpvOaYu"]))
            $sel_tab = Tools::getValue($GLOBALS["pbMjIRDxZSyQqSpvOaYu"]); 
        elseif(Tools::getValue($GLOBALS["hzmznwwhMwKForXthpYo"]))  
            $sel_tab = Tools::getValue($GLOBALS["hzmznwwhMwKForXthpYo"]); 
        elseif(Tools::getValue($GLOBALS["NkxBHdCMcdUrPrqYyhej"]))  
            $sel_tab = Tools::getValue($GLOBALS["NkxBHdCMcdUrPrqYyhej"]);                                


        $_vars = array(
            'modulename' => $this->module->name,
            'moduledir'  => _PS_MODULE_DIR_,
            'modulepath' => _PS_MODULE_DIR_.'/'.$this->module->name,
            'labels'     => $labels,
            'locale'     => $locale,
            'languages'  => $languages,
            "lang"       => $this->current_lang,
            "sel_tab"    => $sel_tab,
            );
        $_vars = array_merge($_vars, $this->tpl_form_vars);
        $this->context->smarty->assign($_vars);

        return $this->module->display(_PS_MODULE_DIR_.$this->module->name.DIRECTORY_SEPARATOR.$this->module->name.$GLOBALS["FLIovxVepvrPFelUHGgg"], $GLOBALS["NPTdNqtFVGbqEzBydQjo"]);
    }
      
    public function postProcess()
    {
        if (Tools::isSubmit($GLOBALS["FAovzbEBbwewmxTqSDg"]))
        {
            $this->{$GLOBALS["FxCXahpINnUXAkLivYRo"]}();
        }
    }
    
    public function postProcessLabels()
    {
        $languageData = Tools::getValue($GLOBALS["HuFFdeKjgfiyyrNZpxTs"]);
        $locale = Tools::getValue($GLOBALS["QFrcMJsmnLnbZBCFkRTa"]);
        $xml =_PS_MODULE_DIR_.$this->module->name.$GLOBALS["vuvpyhhRHXRMeNJBFFqX"].$locale.$GLOBALS["DuBdPXLoBKQELhpcKmMV"];
        $xmldata = simplexml_load_file($xml);

        $childxml = _PS_MODULE_DIR_.$this->module->name.$GLOBALS["mFIvZUDszocHANGLPQeO"].$locale.$GLOBALS["DuBdPXLoBKQELhpcKmMV"];
        $doc = new DOMDocument($GLOBALS["giMzXvZbNRGZuWPNeHvh"]);
        $doc->formatOutput = true;
        $root = $doc->createElement($GLOBALS["ohgmeILpvjDBAlZgeUGZ"]);
        $root = $doc->appendChild($root);
        
        foreach($xmldata as $_key => $_data){
        	$optioncodenode = $doc->createElement($_key);
            $newdoc = $root->appendChild($optioncodenode);
        
            $em = $doc->createElement($GLOBALS["dVuXlSzOGKGyKDnveZoM"]);
            $text = $doc->createTextNode(isset($languageData[$_key]) ? $languageData[$_key] : $_data->mm_text);
            $em->appendChild($text);
            $newdoc->appendChild($em);
        }
        $doc->save($childxml);
        $this->current_lang = $_POST[$GLOBALS["cdZFfLVixVCrXUbBIBKb"]];
    }
    
    public function setLanguageCodeData($locale)
	{
		if($locale != $GLOBALS["UCSLADhJpjsWOsKlUBcb"] && !file_exists(_PS_MODULE_DIR_.$this->module->name.$GLOBALS["vuvpyhhRHXRMeNJBFFqX"].$locale.$GLOBALS["DuBdPXLoBKQELhpcKmMV"]))
			@copy(_PS_MODULE_DIR_.$this->module->name.$GLOBALS["wYXzoSkVnftdlBTimzbE"], _PS_MODULE_DIR_.$this->module->name.$GLOBALS["vuvpyhhRHXRMeNJBFFqX"].$locale.$GLOBALS["DuBdPXLoBKQELhpcKmMV"]);

		 $xml = _PS_MODULE_DIR_.$this->module->name.$GLOBALS["mFIvZUDszocHANGLPQeO"].$locale.$GLOBALS["DuBdPXLoBKQELhpcKmMV"];
		if(!file_exists($xml)){
			if(!file_exists(_PS_MODULE_DIR_.$this->module->name.$GLOBALS["mFIvZUDszocHANGLPQeO"]))
				mkdir(_PS_MODULE_DIR_.$this->module->name.$GLOBALS["mFIvZUDszocHANGLPQeO"], 0755);

			if(file_exists(_PS_MODULE_DIR_.$this->module->name.$GLOBALS["vuvpyhhRHXRMeNJBFFqX"].$locale.$GLOBALS["DuBdPXLoBKQELhpcKmMV"])){
				@copy(_PS_MODULE_DIR_.$this->module->name.$GLOBALS["vuvpyhhRHXRMeNJBFFqX"].$locale.$GLOBALS["DuBdPXLoBKQELhpcKmMV"], _PS_MODULE_DIR_.$this->module->name.$GLOBALS["mFIvZUDszocHANGLPQeO"].$locale.$GLOBALS["DuBdPXLoBKQELhpcKmMV"]);
			}
			else
				@copy(PS_MODULE_DIR_.$this->module->name.$GLOBALS["vuvpyhhRHXRMeNJBFFqX"].$locale.$GLOBALS["DuBdPXLoBKQELhpcKmMV"], PS_MODULE_DIR_.$this->module->name.$GLOBALS["mFIvZUDszocHANGLPQeO"].$locale.$GLOBALS["DuBdPXLoBKQELhpcKmMV"]);
		}
	}

	public function getLanguageData($locale)
	{
        if($locale != $GLOBALS["UCSLADhJpjsWOsKlUBcb"] && !file_exists(_PS_MODULE_DIR_.$this->module->name.$GLOBALS["vuvpyhhRHXRMeNJBFFqX"].$locale.$GLOBALS["DuBdPXLoBKQELhpcKmMV"]))
			@copy(_PS_MODULE_DIR_.$this->module->name.$GLOBALS["wYXzoSkVnftdlBTimzbE"], _PS_MODULE_DIR_.$this->module->name.$GLOBALS["vuvpyhhRHXRMeNJBFFqX"].$locale.$GLOBALS["DuBdPXLoBKQELhpcKmMV"]);
        
        $this->setLanguageCodeData($locale);
		$labels = array();

		$xml = _PS_MODULE_DIR_.$this->module->name.'/views/img/mobi_assets/multilanguage/'.$locale.'.xml';
        $xmldata = simplexml_load_file($xml);
        foreach($xmldata as $_key => $_data){
        	$labels[$_key] = (array)$_data;
        }

        $childxml = _PS_MODULE_DIR_.$this->module->name.$GLOBALS["mFIvZUDszocHANGLPQeO"].$locale.$GLOBALS["DuBdPXLoBKQELhpcKmMV"];
        $childxmldata = simplexml_load_file($childxml);
        foreach($childxmldata as $_key => $_data){
        	if(array_key_exists($_key, $labels)){
        		$labels[$_key][$GLOBALS["dVuXlSzOGKGyKDnveZoM"]] = (string)$_data->mm_text;
        	}
        }

		return $labels;
	}
}
 ?>