<?php
$GLOBALS["GrqDVlFYGpUQkfbPuaRo"]=base64_decode("Y29tbWVudHM=");$GLOBALS["iIOFUMrwXnyUpFNxRMjx"]=base64_decode("ZGF0ZV9hZGQ=");$GLOBALS["bywSdBntueYbCVaeGqtQ"]=base64_decode("ZGF0ZV9hZGRlZA==");$GLOBALS["obIZnTDabuqqbinfQMMJ"]=base64_decode("bGFuZ3VhZ2VfaWQ=");$GLOBALS["eHXlOyJNzloWhDmbfzDI"]=base64_decode("b3N0YXRlX25hbWU=");$GLOBALS["qHbiUFSzlObeDKxJMrdo"]=base64_decode("c3RhdHVzX25hbWU=");$GLOBALS["vEmpcYJbCtHKUjgfOztn"]=base64_decode("aWRfb3JkZXJfc3RhdGU=");$GLOBALS["SvJccFdrtoxuZxOfKARG"]=base64_decode("b3JkZXJfdG90YWw=");$GLOBALS["clPRxOVgIxDQFxwwcMAM"]=base64_decode("YWRkaXRpb25hbF9zaGlwcGluZ19jb3N0");$GLOBALS["jNlPxbThMKlKpxGtfShM"]=base64_decode("cmVkdWN0aW9uX2FwcGxpZXM=");$GLOBALS["lRMkEmatNcMJqwRPcOsd"]=base64_decode("dG90YWxfd3Q=");$GLOBALS["cZxVozsFQFLCcWcJhJbd"]=base64_decode("cHJvZHVjdF9zdWJ0b3RhbA==");$GLOBALS["bUgETvRdZghlcVnivhCY"]=base64_decode("cHJvZHVjdF9wcmljZQ==");$GLOBALS["UqlTYdQvcYTTXuxqMneB"]=base64_decode("cHJvZHVjdF9xdHk=");$GLOBALS["GnUlPBVDMuSlzQZLdzIr"]=base64_decode("aG9tZQ==");$GLOBALS["uumiERFdHiBWTuFFNysQ"]=base64_decode("aWRfaW1hZ2U=");$GLOBALS["laySiRQfXaXAycTmqOHp"]=base64_decode("bGlua19yZXdyaXRl");$GLOBALS["AfqiEYGiPLKtPpmIkWQa"]=base64_decode("cHJvZHVjdF9pbWFnZQ==");$GLOBALS["UUNFwNHGzmeAPwnyOolZ"]=base64_decode("cHJvZHVjdF9uYW1l");$GLOBALS["qcAqdRoXyOjMSzAvwpOV"]=base64_decode("b3B0aW9ucw==");$GLOBALS["ksmBVCTZnuQUbdBtBigo"]=base64_decode("cHJvZHVjdF9pZA==");$GLOBALS["ZGPRTzwMEjuCuHisRKi"]=base64_decode("cHJvZHVjdF9hdHRyaWJ1dGVfaWQ=");$GLOBALS["zbcBZJKfBDgvfSGZKyAz"]=base64_decode("b3JkZXJfaXRlbV9pZA==");$GLOBALS["WNObBJvjlfgbtytIZfTq"]=base64_decode("b3B0aW9uX3ZhbHVl");$GLOBALS["JGjcZLisZunkjSUxakJn"]=base64_decode("b3B0aW9uX3RpdGxl");$GLOBALS["lRBzvzBSEQkJxdBItbg"]=base64_decode("LA==");$GLOBALS["EcaVCaBpiURiLvayrnmh"]=base64_decode("YXR0cmlidXRlcw==");$GLOBALS["kwzZgvKquJmFGGTBdnMM"]=base64_decode("VG90YWw6");$GLOBALS["QwnDpotDTMAoGkeONAby"]=base64_decode("VG90YWwgc2hpcHBpbmc=");$GLOBALS["SFDorlcBiPjCPryhSFSg"]=base64_decode("dm91Y2hlcnM=");$GLOBALS["InxfEgAjwFEWJZJcqmhC"]=base64_decode("VG90YWwgdm91Y2hlcnM6");$GLOBALS["ktwCrReEJlzuBUIjBcCk"]=base64_decode("Og==");$GLOBALS["ClinzIxCOjMUPZxgwDch"]=base64_decode("ICh0YXggaW5jbC4pOg==");$GLOBALS["CEYjKCSBrzdYQcqTDixF"]=base64_decode("VG90YWwgcHJvZHVjdHM=");$GLOBALS["sEVWmFbTxTyXCAuzlzdI"]=base64_decode("cG9zaXRpb24=");$GLOBALS["IXCfKzsjlitrRiMXFvE"]=base64_decode("cHJpY2U=");$GLOBALS["IImYCQzllTCYdaozwveG"]=base64_decode("VG90YWwgcHJvZHVjdHMgKHRheCBleGNsLik6");$GLOBALS["bHCmmOkqExQiHzXBIYgq"]=base64_decode("YmlsbA==");$GLOBALS["ZpUDbwPQocJrSAPpBgbL"]=base64_decode("Y29tcGFueQ==");$GLOBALS["mrYkxwAvScQSssyfGPpw"]=base64_decode("Y291bnRyeQ==");$GLOBALS["bbAGmWKbjedCFATLKJma"]=base64_decode("Y291bnRyeV9jb2Rl");$GLOBALS["LICtGLdwzIqFApaJRRXy"]=base64_decode("YWRkcmVzczI=");$GLOBALS["CaauDtHlPHjHNetsgjE"]=base64_decode("YWRkcmVzczE=");$GLOBALS["rYlIPOBrKjdNxIKNcBXZ"]=base64_decode("c3RyZWV0");$GLOBALS["GNvpafcVjyBCEkcYYRA"]=base64_decode("c3RhdGU=");$GLOBALS["bvjGPUxKWNIHyniomnAo"]=base64_decode("c3RhdGVfbmFtZQ==");$GLOBALS["cVXWbEUBKseJtcmtmElA"]=base64_decode("em9uZV9uYW1l");$GLOBALS["SaEJArHpRptwPxNoQEkd"]=base64_decode("em9uZV9jb2Rl");$GLOBALS["NRdTFiuguKOcyboYWuHE"]=base64_decode("em9uZV9pZA==");$GLOBALS["WKBChtIeVLMffdOLPBQn"]=base64_decode("Y2l0eQ==");$GLOBALS["eXzPUWlNwFsHWkMUnYUR"]=base64_decode("cG9zdGNvZGU=");$GLOBALS["qBHVKrvGkaTfwnDCFXnp"]=base64_decode("emlw");$GLOBALS["wrnzRdZrqYLEAFWOVZmR"]=base64_decode("Z2VuZGVy");$GLOBALS["WcjGqYQLsndqcgkOWlOu"]=base64_decode("bW9iaWxl");$GLOBALS["YIsSpOwBUexreWgtnqHy"]=base64_decode("dGVsZXBob25l");$GLOBALS["iKLyShFQlpjmJpFfaoec"]=base64_decode("IA==");$GLOBALS["FhzXsRsmAttmXNINpnhh"]=base64_decode("Zmlyc3RuYW1l");$GLOBALS["aSUcuRxxYGDxeyhLbbVE"]=base64_decode("bGFzdG5hbWU=");$GLOBALS["PRuifeDjklIhgMqHyQTz"]=base64_decode("c2hpcA==");$GLOBALS["VwpNLVkhHxfKPQbCEVLQ"]=base64_decode("YWRkcmVzc190eXBl");$GLOBALS["wSCtxSTvtRXPTULgPUHH"]=base64_decode("YWRkcmVzc19ib29rX2lk");$GLOBALS["GNgmbRbejfRAIZpcZGBR"]=base64_decode("Y291bnRyeV9pZA==");$GLOBALS["SJMQQHzjLEdLVmUkMEza"]=base64_decode("VXNlcg==");$GLOBALS["kfKewMKazDtZhBPiRUoo"]=base64_decode("c3RhdHVzTGFiZWw=");$GLOBALS["jipERDduxZmmRiwIzJHB"]=base64_decode("ZGlzcGxheV90ZXh0");$GLOBALS["UHjcCUAlGFGSRKsjinnP"]=base64_decode("c3RhdHVzX2lk");$GLOBALS["jvNUZuArDlDbVsDKKNjT"]=base64_decode("c3RhdHVz");$GLOBALS["iSFywdRMNzjzoulKGhlv"]=base64_decode("b3JkZXJfZGF0ZQ==");$GLOBALS["TgmCwIoqPxbJHHLeIAe"]=base64_decode("b3JkZXJfbm90ZQ==");$GLOBALS["iKEQRFcfxIqznxtlsAQh"]=base64_decode("ZGlzY291bnQ=");$GLOBALS["GdXuKgmZYyIJXBopiVCe"]=base64_decode("b3JkZXJfdGF4X3JhdGU=");$GLOBALS["NNfoJUxsUuGgscydjtxG"]=base64_decode("c19mZWU=");$GLOBALS["OpyZGzwRrgPrrQsFAdPU"]=base64_decode("c3VidG90YWw=");$GLOBALS["nLSNuegHlTCFwUBmHLyK"]=base64_decode("Z3JhbmRfdG90YWw=");$GLOBALS["ZHAFaNUpgyZjImClgQtC"]=base64_decode("bGFzdF9zdGF0dXNfaWQ=");$GLOBALS["pxERNTNsNGISPvtdDtl"]=base64_decode("b3JkZXJfc3RhdHVz");$GLOBALS["qndDAMuQnmYYdCxECspx"]=base64_decode("Y291cG9u");$GLOBALS["cluGjJFbELRYHNeepkdA"]=base64_decode("c2hpcHBpbmdfaW5zdXJhbmNl");$GLOBALS["krcTTbNMVVHYidqObhgR"]=base64_decode("c2hpcHBpbmdfbWV0aG9k");$GLOBALS["xTcREswwoneEcPrMnRIV"]=base64_decode("cGF5bWVudF9tZXRob2Q=");$GLOBALS["IioRvFMpbjxLVvTrXse"]=base64_decode("YmlsbGluZ19hZGRyZXNz");$GLOBALS["YcVFMqdZRdTEpIZsPOw"]=base64_decode("aW5jcmVtZW50X2lk");$GLOBALS["EbXIawqnHDbDPPpxXRp"]=base64_decode("ZGVzY3JpcHRpb24=");$GLOBALS["FKJJSrcKfNlcouSwAAmL"]=base64_decode("dGl0bGU=");$GLOBALS["HGWpagQhzXhqSDSWyQZY"]=base64_decode("cG1faWQ=");$GLOBALS["kBVqwgUCWFvxVAdcfHQ"]=base64_decode("Y2FydF9xdWFudGl0eQ==");$GLOBALS["iovnsSfSfLlsBlMvREvS"]=base64_decode("cXR5");$GLOBALS["EhTXRqILyJaFcRZsgsMz"]=base64_decode("cHJpY2Vfd3Q=");$GLOBALS["ZHcipcqtxZZjnxLnUcGB"]=base64_decode("Y2F0ZWdvcnlfbmFtZQ==");$GLOBALS["BoWuBfavKqJxeLgCuLA"]=base64_decode("bmFtZQ==");$GLOBALS["cezLRxVGpwnyDVhOFzqd"]=base64_decode("aXRlbV90aXRsZQ==");$GLOBALS["hqzNeHAWOwqfUZHIwuEa"]=base64_decode("aWRfcHJvZHVjdA==");$GLOBALS["fzPHrkFxgRoWCJQkNlge"]=base64_decode("b3JkZXJfaXRlbV9rZXk=");$GLOBALS["wvbqjiBRDXrNUyYsdenC"]=base64_decode("dGF4");$GLOBALS["DLUCkQoBJDWFXzsSUAaM"]=base64_decode("c2hpcHBpbmc=");$GLOBALS["eNmsUERaOkuDaKikPutW"]=base64_decode("aG9tZV9jdXJyZW5jeV9wcmljZQ==");$GLOBALS["TBjDJzTpaHcBKQPltydk"]=base64_decode("dG90YWw=");$GLOBALS["kqpjokinrNKzMlmecrBs"]=base64_decode("dHlwZQ==");$GLOBALS["rzWjxrqJLMQRglgEZrLx"]=base64_decode("MzA=");$GLOBALS["SHlRCNLzGtCGyHhhetLl"]=base64_decode("MQ==");$GLOBALS["oRogDBPHGCPXatNHLfBt"]=base64_decode("aW52b2ljZV9udW1iZXI=");$GLOBALS["asxETQgoYgCVOHXhnboY"]=base64_decode("Y3VycmVuY3k=");$GLOBALS["YqyolcmCAiIfgRPfCTNy"]=base64_decode("cGF5bWVudF90b3RhbA==");$GLOBALS["pvwtKwdFTwopxtIFnsiY"]=base64_decode("dHJhbnNhY3Rpb25faWQ=");$GLOBALS["siOBkNuGhovGPzJs"]=base64_decode("aXNvX2NvZGU=");$GLOBALS["OuMOWOuHTSJeStLxpPzy"]=base64_decode("ZGlzcGxheV9pZA==");$GLOBALS["tugkmwKQmrdyfghQnRJj"]=base64_decode("");$GLOBALS["UErXESVgiXETbMaUsAvm"]=base64_decode("LCA=");$GLOBALS["DQZVIyveYbiVxRRpovnY"]=base64_decode("U29tZSBpdGVtcyBhcmUgbm8gbG9uZ2VyIGF2YWlsYWJsZSwgYW5kIHdlIGFyZSB1bmFibGUgdG8gcmVuZXcgeW91ciBvcmRlci4=");$GLOBALS["BTTMRTzWsQuTtOMCgECy"]=base64_decode("c3VjY2Vzcw==");$GLOBALS["KijJBVRzGRNHPUwHyXau"]=base64_decode("U29ycnkuIFdlIGNhbm5vdCByZW5ldyB5b3VyIG9yZGVyLg==");$GLOBALS["alHKmGFEojxrfKbyyvEp"]=base64_decode("Y2FydA==");$GLOBALS["RebOSfKjxLaHWlwWPQMS"]=base64_decode("b3JkZXJfaWQ=");$GLOBALS["BJrAuOKBLFeoucFBMCrQ"]=base64_decode("YWxsb3dfcmVvcmRlcg==");$GLOBALS["rUVLMDNCwQuomgyFgSRa"]=base64_decode("c2hpcHBpbmdfYWRkcmVzcw==");$GLOBALS["voeSoFKiNxswaYPuxYjI"]=base64_decode("YmlsbGluZ0FkZHJlc3M=");$GLOBALS["zvUPCdlHmlbreSGGUtvb"]=base64_decode("c2hpcHBpbmdBZGRyZXNz");$GLOBALS["TunhzhYWqMgWJQvkIKDG"]=base64_decode("ZGVjcnlwdA==");$GLOBALS["odJflqXmCQlgfOtopvoI"]=base64_decode("ZW5jcnlwdA==");$GLOBALS["kgFKuLWHZDZSXnqbygae"]=base64_decode("c2hhMjU2");$GLOBALS["jwpArTcslJNUbmDXiISk"]=base64_decode("VGhpcyBpcyBteSBzZWNyZXQgaXY=");$GLOBALS["BRPNoLaBSDpGRByuXpZh"]=base64_decode("VGhpcyBpcyBteSBzZWNyZXQga2V5");$GLOBALS["OHRrnGIvmUcyOndyvaGQ"]=base64_decode("b3JkZXJz");$GLOBALS["WXceMDacuSApSjqZABeb"]=base64_decode("b3JkZXJzQ291bnQ=");$GLOBALS["SUilqvzYBUFvqWDgqspY"]=base64_decode("Y3JlYXRlZF9hdA==");$GLOBALS["LNJcPXllxExzrmvPuZCw"]=base64_decode("ZW50aXR5X2lk");$GLOBALS["tYUXWvXqqZRWdvgYPlGD"]=base64_decode("dG90YWxfcXR5X29yZGVyZWQ=");$GLOBALS["sWCONYouUszQosYnw"]=base64_decode("b3JkZXJfaXRlbXM=");$GLOBALS["VdVzZmgPZuXwDwiTrzI"]=base64_decode("cHJpY2VfaW5mb3M=");$GLOBALS["QsYBhlhcswQxYKpWyzVK"]=base64_decode("aWRfb3JkZXI=");$GLOBALS["nVWeDTWlafDTkpRzvCph"]=base64_decode("cGFnZV9zaXpl");$GLOBALS["PPujwNfSSRRCezamCiDr"]=base64_decode("cGFnZV9ubw==");$GLOBALS["vnikmTnwHXDcKJBQNHoK"]=base64_decode("TW9iaWNvbW1lcmNlaGVscGVy");$GLOBALS["PdepTkCacGhHbSYynMub"]=base64_decode("SFRUUC8xLjEgNDA0IE5vdCBGb3VuZA==");$GLOBALS["QIfjBqYCYzCTbgddRxFH"]=base64_decode("SU5fTU9CSUNPTU1FUkNF");$GLOBALS["JDfeyGDbvUQucHiTMHyj"]=base64_decode("LCA=");$GLOBALS["esFCHHTawPgiXnJBY"]=base64_decode("CgkJCU9SREVSIEJZIGBkYXRlX2FkZGAgREVTQwoJCQlMSU1JVCA=");$GLOBALS["eQrjZClvSMCqrStaYOTr"]=base64_decode("b3JkZXJzYAogICAgICAgICAgICBXSEVSRSBpZF9jdXN0b21lciA9ICA=");$GLOBALS["JSMGiPOdkTPsyDCYPpUs"]=base64_decode("CgkJCVNFTEVDVCBpZF9vcmRlcgoJCQlGUk9NIGA=");$GLOBALS["SnsSSwMKZSYeMFnEirnh"]=base64_decode("");$GLOBALS["IjKVpFJQMbafNetZEs"]=base64_decode("QUVTLTI1Ni1DQkM=");
?><?php


if (!defined($GLOBALS["QIfjBqYCYzCTbgddRxFH"])) {
    header($GLOBALS["PdepTkCacGhHbSYynMub"]);
    die();
}


class OrderService extends BaseService
{
    public function __construct()
    {
        parent::__construct();
        ServiceFactory::factory($GLOBALS["vnikmTnwHXDcKJBQNHoK"])->autoLoginMobileUser();
    }

    
    public function getOrderInfos(array $parameter)
    {
        $orderInfos = array();

        $pageNo = $parameter['page_no'];
        $pageSize = $parameter['page_size'];

        $orders = $this->getOrderList($pageNo, $pageSize);
        
        foreach ($orders as $value) {
            $order = new Order($value[$GLOBALS["QsYBhlhcswQxYKpWyzVK"]]);
            $orderItem = array();

            $this->initOrderDetail($orderItem, $order);
            $orderItem[$GLOBALS["VdVzZmgPZuXwDwiTrzI"]] = $this->getPriceInfos($orderItem, $order);
            $orderItem[$GLOBALS["sWCONYouUszQosYnw"]] = $this->getOrderItems($order,$nbTotalProducts);
            $orderItem[$GLOBALS["tYUXWvXqqZRWdvgYPlGD"]] = count($orderItem[$GLOBALS["sWCONYouUszQosYnw"]]);

            
            $orderItem[$GLOBALS["LNJcPXllxExzrmvPuZCw"]] = $value[$GLOBALS["QsYBhlhcswQxYKpWyzVK"]];
            $orderItem[$GLOBALS["SUilqvzYBUFvqWDgqspY"]] = $order->date_add;
            
            $orderItem = arrangeOrderDetailData($orderItem);
            $orderInfos[] = $orderItem;
        }

        return array('ordersCount' => $this->getUserOrderCounts(), 'orders' => $orderInfos);
    }

    public function encrypt_decrypt($action, $string) {
        $output = false;

        $encrypt_method = $GLOBALS["IjKVpFJQMbafNetZEs"];
        $secret_key = $GLOBALS["BRPNoLaBSDpGRByuXpZh"];
        $secret_iv = $GLOBALS["jwpArTcslJNUbmDXiISk"];

                $key = hash($GLOBALS["kgFKuLWHZDZSXnqbygae"], $secret_key);
        
                $iv = Tools::substr(hash($GLOBALS["kgFKuLWHZDZSXnqbygae"], $secret_iv), 0, 16);

        if( $action == $GLOBALS["odJflqXmCQlgfOtopvoI"] ) {
            $output = openssl_encrypt($string, $encrypt_method, $key, 0, $iv);
            $output = base64_encode($output);
        }
        else if( $action == $GLOBALS["TunhzhYWqMgWJQvkIKDG"] ){
            $output = openssl_decrypt(base64_decode($string), $encrypt_method, $key, 0, $iv);
        }

        return $output;
    }

    
    public function getOneOrderInfoById($orderId, $cartId = 0)
    {
        
        if(Tools::strlen($orderId) >= 28){
            $Ref = $orderId;
            $Ref = $this->encrypt_decrypt($GLOBALS["TunhzhYWqMgWJQvkIKDG"],$Ref);
            $cart_id = $Ref;
            $order = New Order();
            $orderId = $order->getOrderByCartId($cart_id);
        }
        

        
        if(!empty($cartId)){
            $orderId = Order::getOrderByCartId((int)($cartId));
        }
        

        $orderItem = array();

        $order = $this->getOneOrder($orderId);
        $this->initOrderDetail($orderItem, $order);
        $orderItem[$GLOBALS["VdVzZmgPZuXwDwiTrzI"]]     = $this->getPriceInfos($orderItem, $order);
        $orderItem[$GLOBALS["sWCONYouUszQosYnw"]]     = $this->getOrderItems($order, $nbTotalProducts);
        $orderItem[$GLOBALS["zvUPCdlHmlbreSGGUtvb"]] = $this->getShippingAddress($order);
        $orderItem[$GLOBALS["voeSoFKiNxswaYPuxYjI"]]  = $this->getBillingAddress($order, $orderItem[$GLOBALS["rUVLMDNCwQuomgyFgSRa"]]);
        $orderItem[$GLOBALS["BJrAuOKBLFeoucFBMCrQ"]] = true;
        $orderItem[$GLOBALS["tYUXWvXqqZRWdvgYPlGD"]] = $nbTotalProducts;

        
        $orderItem[$GLOBALS["RebOSfKjxLaHWlwWPQMS"]] = $orderId;
        
        $orderItem = arrangeOrderDetailData($orderItem);
        return $orderItem;
    }

    public function reOrder($id_order)
    {
        $errors = array();
        $oldCart = new Cart(Order::getCartIdStatic($id_order, $this->context->customer->id));
        $duplication = $oldCart->duplicate();
        if (!$duplication || !Validate::isLoadedObject($duplication[$GLOBALS["alHKmGFEojxrfKbyyvEp"]]))
            $errors[] = Tools::displayError($GLOBALS["KijJBVRzGRNHPUwHyXau"]);
        elseif (!$duplication[$GLOBALS["BTTMRTzWsQuTtOMCgECy"]])
            $errors[] = Tools::displayError($GLOBALS["DQZVIyveYbiVxRRpovnY"]);
        else
        {
            $this->context->cookie->id_cart = $duplication[$GLOBALS["alHKmGFEojxrfKbyyvEp"]]->id;
            $context = $this->context;
            $context->cart = $duplication[$GLOBALS["alHKmGFEojxrfKbyyvEp"]];
            CartRule::autoAddToCart($context);
            $this->context->cookie->write();
            return array(true, 'success');
        }
        return array(false, implode(', ', $errors));
    }

    public function getPaymentOrderInfo($order, $tx = '')
    {
        $orderItem = array();
        $orderId = false;

        if ($order) {
            $orderItem[$GLOBALS["OuMOWOuHTSJeStLxpPzy"]] = $orderId = $order->id;
            $orderItem[$GLOBALS["rUVLMDNCwQuomgyFgSRa"]] = $this->getShippingAddress($order);
            $orderItem[$GLOBALS["VdVzZmgPZuXwDwiTrzI"]] = $this->getPaymentPriceInfos($order);
            $orderItem[$GLOBALS["sWCONYouUszQosYnw"]] = $this->getPaymentOrderItems($order);

            $total = $order->total_paid;
            $currencyDate = Currency::getCurrency($order->id_currency);
            $currency = $currencyDate[$GLOBALS["siOBkNuGhovGPzJs"]];
        } else {
            $total = 0;
            $currency = $this->context->cookie->currency;
        }

        return array(
            'transaction_id' => $tx,
            'payment_total'  => $total,
            'currency'       => $currency,
            'order_id'       => $orderId,
            'orders'         => sizeof($orderItem) ? array($orderItem) : false,

                        $GLOBALS["oRogDBPHGCPXatNHLfBt"] => $order->reference,
            $GLOBALS["OHRrnGIvmUcyOndyvaGQ"] => $this->getOrderInfos(array(
                $GLOBALS["PPujwNfSSRRCezamCiDr"]   => $GLOBALS["SHlRCNLzGtCGyHhhetLl"],
                $GLOBALS["nVWeDTWlafDTkpRzvCph"] => $GLOBALS["rzWjxrqJLMQRglgEZrLx"],
                ))
        );
    }

    public function getPaymentPriceInfos($order)
    {
        $info = array();

        $info[] = array(
            'type' => 'total',
            'home_currency_price' => $order->total_paid
        );

        $info[] = array(
            'type' => 'shipping',
            'home_currency_price' => $order->total_shipping
        );

        $tax = $order->getTotalProductsWithTaxes() - $order->getTotalProductsWithoutTaxes();
        $info[] = array(
            'type' => 'tax',
            'home_currency_price' => $tax
        );

        return $info;
    }

    public function getPaymentOrderItems($order)
    {
        $items = array();
        $cart = new Cart($order->id_cart);
        $products = $cart->getProducts();
        foreach ($products as $product) {
            $items[] = array(
                'order_item_key' => $product['id_product'],
                'item_title' => $product['name'],
                'category_name' => '',
                'home_currency_price' => $product['price_wt'],
                'qty' => $product['cart_quantity']
            );
        }

        return $items;
    }

    
    public function initOrderDetail(&$orderItem, $order)
    {
        $payMethod = array('pm_id' => '',
            'title' => $order->payment,
            'description' => '');
                $orderState = OrderHistory::getLastOrderState($order->id);
        $Carrier = new Carrier($order->id_carrier);
        $currency = Currency::getCurrency($order->id_currency);
        $orderItem = array(
            'order_id'           => $order->id,
            'increment_id'       => $order->reference,
            'currency'           => $currency['iso_code'],
            'shipping_address'   => array(),
            'billing_address'    => array(),
            'payment_method'     => $payMethod['title'],
            'shipping_method'    => $Carrier->name,
            'shipping_insurance' => 0,
            'coupon'             => '',
            'order_status'       => $orderState,
            'last_status_id'     => $orderState->id,
            'grand_total'        => $order->total_paid,
            'subtotal'           => $order->total_products,
            's_fee'              => $order->total_shipping,
            'tax'                => ($order->total_paid_tax_incl-$order->total_paid_tax_excl),
            $GLOBALS["GdXuKgmZYyIJXBopiVCe"]     => $order->carrier_tax_rate,
            $GLOBALS["iKEQRFcfxIqznxtlsAQh"]           => $order->total_discounts,
            $GLOBALS["TgmCwIoqPxbJHHLeIAe"]         => $order->gift_message,
            $GLOBALS["SUilqvzYBUFvqWDgqspY"]         => $order->date_add,
            $GLOBALS["iSFywdRMNzjzoulKGhlv"]         => $order->date_add,
            );

        $status = $this->getOrderHistory($order);
        $orderItem[$GLOBALS["pxERNTNsNGISPvtdDtl"]] = $status;
        $orderItem[$GLOBALS["jvNUZuArDlDbVsDKKNjT"]] = (isset($status[0][$GLOBALS["UHjcCUAlGFGSRKsjinnP"]])?$status[0][$GLOBALS["jipERDduxZmmRiwIzJHB"]]:$GLOBALS["SnsSSwMKZSYeMFnEirnh"]);
        $orderItem[$GLOBALS["kfKewMKazDtZhBPiRUoo"]] = (isset($status[0][$GLOBALS["jipERDduxZmmRiwIzJHB"]])?$status[0][$GLOBALS["jipERDduxZmmRiwIzJHB"]]:$GLOBALS["SnsSSwMKZSYeMFnEirnh"]);
    }

    
    private function getShippingAddress($order)
    {
        $addr = ServiceFactory::factory($GLOBALS["SJMQQHzjLEdLVmUkMEza"])->getAddress($order->id_address_invoice);
        $country = new Country($addr[$GLOBALS["GNgmbRbejfRAIZpcZGBR"]]);
        $zone = new Zone($country->id_zone);

        $address = array('address_book_id' => $addr['address_book_id'],
            'address_type' => 'ship',
            'lastname'     => $addr['lastname'],
            'firstname'    => $addr['firstname'],
            'name'         => $addr['firstname'].' '.$addr['lastname'],
            'telephone'    => $addr['telephone'],
            'mobile'       => $addr['mobile'],
            'gender'       => '',
            'zip'          => $addr['postcode'],
            'city'         => $addr['city'],
            'zone_id'      => $zone->id,
            'zone_code'    => $zone->iso_code,
            'zone_name'    => $zone->name,
            'state_name'   => $addr['state'],
            'street'       => array_filter(array($addr['address1'],$addr['address2'])),
            $GLOBALS["GNgmbRbejfRAIZpcZGBR"]   => strval($country->id),
            $GLOBALS["bbAGmWKbjedCFATLKJma"] => $country->iso_code,
            $GLOBALS["mrYkxwAvScQSssyfGPpw"]      => is_array($country->name) ? $country->name[1] : $country->name,
            $GLOBALS["ZpUDbwPQocJrSAPpBgbL"]      => $addr[$GLOBALS["ZpUDbwPQocJrSAPpBgbL"]]);

        return $address;
    }

    
    private function getBillingAddress($order, $shippingAddress = false)
    {
        if ($order->id_address_delivery == $order->id_address_invoice && $shippingAddress) {
            $address = $shippingAddress;
            $address[$GLOBALS["VwpNLVkhHxfKPQbCEVLQ"]] = $GLOBALS["bHCmmOkqExQiHzXBIYgq"];

            return $address;
        }

        $addr = ServiceFactory::factory($GLOBALS["SJMQQHzjLEdLVmUkMEza"])->getAddress($order->id_address_delivery);
        $country = new Country($addr[$GLOBALS["GNgmbRbejfRAIZpcZGBR"]]);
        $zone = new Zone($country->id_zone);

        $address = array(
            'address_book_id' => $addr['address_book_id'],
            'address_type'    => 'bill',
            'lastname'        => $addr['lastname'],
            'firstname'       => $addr['firstname'],
            'name'            => $addr['firstname'].' '.$addr['lastname'],
            'telephone'       => $addr['telephone'],
            'mobile'          => $addr['mobile'],
            'gender'          => '',
            'zip'             => $addr['postcode'],
            'city'            => $addr['city'],
            'zone_id'         => $zone->id,
            'zone_code'       => $zone->iso_code,
            'zone_name'       => $zone->name,
            'state_name'      => $addr['state'],
            'street'          => array_filter(array($addr['address1'],$addr['address2'])),
            $GLOBALS["GNgmbRbejfRAIZpcZGBR"]      => strval($country->id),
            $GLOBALS["bbAGmWKbjedCFATLKJma"]    => $country->iso_code,
            $GLOBALS["mrYkxwAvScQSssyfGPpw"]         => is_array($country->name) ? $country->name[1] : $country->name,
            $GLOBALS["ZpUDbwPQocJrSAPpBgbL"]         => $addr[$GLOBALS["ZpUDbwPQocJrSAPpBgbL"]]);

        return $address;
    }

    
    public function getPriceInfos(&$orderItem, $order)
    {
        $info = array();
        $postion = 0;

        $carrier = new Carrier($order->id_carrier);
        $currency = new Currency($order->id_currency);
        
                $orderItem[$GLOBALS["krcTTbNMVVHYidqObhgR"]] = $carrier->name;

        if ($this->priceDisplay && $this->withTax) {
            $info[] = array(
                'title' => $this->l('Total products (tax excl.):'),
                $GLOBALS["kqpjokinrNKzMlmecrBs"] => $GLOBALS["wvbqjiBRDXrNUyYsdenC"],
                $GLOBALS["IXCfKzsjlitrRiMXFvE"] => $order->getTotalProductsWithoutTaxes(),
                $GLOBALS["asxETQgoYgCVOHXhnboY"] => $currency->iso_code,
                $GLOBALS["sEVWmFbTxTyXCAuzlzdI"] => $postion++);
        }

        $info[] = array(
            'title'    => $this->l('Total products' . ($this->withTax ? ' (tax incl.):' : ':')),
            $GLOBALS["kqpjokinrNKzMlmecrBs"]     => $GLOBALS["OpyZGzwRrgPrrQsFAdPU"],
            $GLOBALS["IXCfKzsjlitrRiMXFvE"]    => $order->getTotalProductsWithTaxes(),
            $GLOBALS["asxETQgoYgCVOHXhnboY"] => $currency->iso_code,
            $GLOBALS["sEVWmFbTxTyXCAuzlzdI"] => $postion++
            );

        if ($order->total_discounts > 0) {
            $info[] = array(
                'title'    => $this->l('Total vouchers:'),
                $GLOBALS["kqpjokinrNKzMlmecrBs"]     => $GLOBALS["iKEQRFcfxIqznxtlsAQh"],
                $GLOBALS["IXCfKzsjlitrRiMXFvE"]    => $order->total_discounts,
                $GLOBALS["asxETQgoYgCVOHXhnboY"] => $currency->iso_code,
                $GLOBALS["sEVWmFbTxTyXCAuzlzdI"] => $postion++
                );
        }

        if ($order->total_wrapping > 0) {
            $info[] = array(
                'title'    => $this->l('Total vouchers:'),
                $GLOBALS["kqpjokinrNKzMlmecrBs"]     => $GLOBALS["SFDorlcBiPjCPryhSFSg"],
                $GLOBALS["IXCfKzsjlitrRiMXFvE"]    => $order->total_wrapping,
                $GLOBALS["asxETQgoYgCVOHXhnboY"] => $currency->iso_code,
                $GLOBALS["sEVWmFbTxTyXCAuzlzdI"] => $postion++
                );
        }

        $info[] = array(
            'title'    => $this->l('Total shipping' . ($this->withTax ? ' (tax incl.):' : ':')),
            $GLOBALS["kqpjokinrNKzMlmecrBs"]     => $GLOBALS["DLUCkQoBJDWFXzsSUAaM"],
            $GLOBALS["IXCfKzsjlitrRiMXFvE"]    => $order->total_shipping,
            $GLOBALS["asxETQgoYgCVOHXhnboY"] => $currency->iso_code,
            $GLOBALS["sEVWmFbTxTyXCAuzlzdI"] => $postion++
            );

        $info[] = array(
            'title'    => $this->l('Total:'),
            $GLOBALS["kqpjokinrNKzMlmecrBs"]     => $GLOBALS["TBjDJzTpaHcBKQPltydk"],
            $GLOBALS["IXCfKzsjlitrRiMXFvE"]    => $order->total_paid,
            $GLOBALS["asxETQgoYgCVOHXhnboY"] => $currency->iso_code,
            $GLOBALS["sEVWmFbTxTyXCAuzlzdI"] => $postion++
            );


        return $info;
    }

    
    public function getOrderItems($order,&$nbTotalProducts=0)
    {
        $items = array();
        $cart = new Cart($order->id_cart);
        $products = $cart->getProducts();
        foreach ($products as $row) {
            $productId = $row[$GLOBALS["hqzNeHAWOwqfUZHIwuEa"]];
            $nbTotalProducts += intval($row[$GLOBALS["kBVqwgUCWFvxVAdcfHQ"]]);

            $options = array();
            $attributes = isset($row['attributes']) ? explode($GLOBALS["lRBzvzBSEQkJxdBItbg"],  $row[$GLOBALS["EcaVCaBpiURiLvayrnmh"]]) : array();
            if($attributes) {
                foreach ($attributes as $_attribute) {
                    $_attribute = explode($GLOBALS["ktwCrReEJlzuBUIjBcCk"], $_attribute);
                    $options[] = array(
                        'option_title' => $_attribute[0],
                        'option_value' => $_attribute[1]
                        );
                }
            }
            $_item = array(
                'order_item_id'    => $productId . ':' . $row['product_attribute_id'],
                'product_id'       => $productId,
                'options'          => $options,
                'product_name'     => $row['name'],
                'product_image'    => $this->getProductImage($row['link_rewrite'], $row['id_image'], 'home'),
                $GLOBALS["UqlTYdQvcYTTXuxqMneB"]      => $row[$GLOBALS["kBVqwgUCWFvxVAdcfHQ"]],
                $GLOBALS["bUgETvRdZghlcVnivhCY"]    => $row[$GLOBALS["EhTXRqILyJaFcRZsgsMz"]],
                $GLOBALS["cZxVozsFQFLCcWcJhJbd"] => $row[$GLOBALS["lRMkEmatNcMJqwRPcOsd"]],
                $GLOBALS["iKEQRFcfxIqznxtlsAQh"]         => $row[$GLOBALS["jNlPxbThMKlKpxGtfShM"]],
                $GLOBALS["NNfoJUxsUuGgscydjtxG"]            => $row[$GLOBALS["clPRxOVgIxDQFxwwcMAM"]],
                $GLOBALS["SvJccFdrtoxuZxOfKARG"]      => $row[$GLOBALS["lRMkEmatNcMJqwRPcOsd"]],
                );
            addImageRatio($_item);

            $items[] = $_item;
        }

        return $items;
    }

    
    public function getOrderHistory($order)
    {
        $info = array();
        $postion = 0;

        $rows = $order->getHistory($this->context->cookie->id_lang);
        foreach ($rows as $row) {
            $info[] = array(
                'status_id'    => $row['id_order_state'],
                'status_name'  => $row['ostate_name'],
                'display_text' => $row['ostate_name'],
                'language_id'  => $this->context->cookie->id_lang,
                'date_added'   => $row['date_add'],
                'comments'     => '',
                'position'     => $postion++
                );
        }

        return $info;
    }

    
    public function getOrderList($pageNo, $pageSize)
    {
        $start = ($pageNo - 1) * $pageSize;
        $userId = $this->context->cookie->id_customer;
        
        $orders = Db::getInstance(_PS_USE_SQL_SLAVE_)->ExecuteS($GLOBALS["JSMGiPOdkTPsyDCYPpUs"] . _DB_PREFIX_ . $GLOBALS["eQrjZClvSMCqrStaYOTr"].$userId.$GLOBALS["esFCHHTawPgiXnJBY"].$start.$GLOBALS["JDfeyGDbvUQucHiTMHyj"].$pageSize.$GLOBALS["SnsSSwMKZSYeMFnEirnh"]);
        return $orders;
    }

    
    public function getOneOrder($orderId)
    {
        return new Order($orderId);
    }

    
    public function getUserOrderCounts()
    {
        return (isset($this->context->cookie->id_customer)) ? Order::getCustomerNbOrders($this->context->cookie->id_customer) : 0;
    }
}
 ?>